import{A as k}from"./AuthenticatedLayout-CYvgjY2K.js";import{M as D}from"./Modal-iMdzk-6u.js";import{Z as C,c as r,a as n,F as b,_ as A,r as u,o as a,b as o,t as i,d as h,e as t,w as m,f,n as _,p as S,g as I}from"./app-CUebUM7Q.js";import{M}from"./vue-multiselect.esm-DrWtARSN.js";/* empty css                        */const F={layout:k,props:["datas"],components:{Head:C,Modal:D,Multiselect:M},data(){return{table:[{title:"Requestor",data:"requestor.name"},{title:"Status",data:"status",render:e=>{switch(e.status){case 0:return r("span",{class:"badge badge-warning"},[n("Waiting for Approval")]);case 1:return r("span",{class:"badge badge-success"},[n("Approved")]);case 2:return r("span",{class:"badge badge-danger"},[n("Rejected")]);default:return r("span",null,[n("Unknown")])}}},{title:"Created At",data:"created_at"},{title:"Created By",data:"creator.name"}],data:this.datas,selectedIds:[],errors:{},form:{}}},mounted(){this.resetForm()},methods:{detail(e){this.form=e,$("#modal-approval").modal("show")},async approveData(e){this.form.submit||(this.form.type=e,this.form.submit=!0,b.post(this.route("approval.action"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-approval").modal("hide"),this.$success("Data berhasil disimpan"),b.visit(this.$page.url,{only:["approval"]})},onError:()=>{this.form.submit=!1,this.$error()}}))},resetForm(e=null){this.form={id:(e==null?void 0:e.id)??null,requestor:(e==null?void 0:e.requestor)??{},approver:(e==null?void 0:e.approver)??{},detail:(e==null?void 0:e.detail)??"",status:0,submit:!1},this.errors={}},localDate(e){return new Date(e).toLocaleString()}}},l=e=>(S("data-v-17a5c7c9"),e=e(),I(),e),q={key:0,class:"alert alert-success",role:"alert"},B={key:1,class:"alert alert-danger",role:"alert"},L={class:"card shadow"},N=l(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-user"}),n(" Data Approval ")])],-1)),V=["onClick"],E={class:"bg-gray-100 p-4"},H=l(()=>t("br",null,null,-1)),R=l(()=>t("br",null,null,-1)),T=l(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),j=l(()=>t("span",{class:"bott"},"Loading",-1)),W={key:1,class:"bott"},x=l(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),z=l(()=>t("span",{class:"bott"},"Loading",-1)),P={key:1,class:"bott"};function U(e,d,Z,G,s,c){const v=u("Head"),g=u("Table"),y=u("Modal");return a(),o("div",null,[r(v,{title:"Approval"}),e.$page.props.flash.success?(a(),o("div",q,i(e.$page.props.flash.success),1)):h("",!0),e.$page.props.flash.error?(a(),o("div",B,i(e.$page.props.flash.error),1)):h("",!0),t("div",L,[N,r(g,{columns:s.table,rows:s.data},{actions:m(({row:p})=>[t("button",{onClick:J=>c.detail(p),class:"btn btn-warning btn-sm",title:"Edit"}," Detail",8,V),n("  ")]),_:1},8,["columns","rows"])]),r(y,{show:e.modalShow,title:"Data Approval",id:"modal-approval"},{footer:m(()=>[t("button",{type:"button",class:_(["btn btn-primary",{disabled:s.form.submit,disabled:s.form.status!=0}]),onClick:d[0]||(d[0]=p=>c.approveData(1))},[s.form.submit?(a(),o(f,{key:0},[T,j],64)):(a(),o("span",W,"Approve"))],2),t("button",{type:"button",class:_(["btn btn-danger",{disabled:s.form.submit,disabled:s.form.status!=0}]),onClick:d[1]||(d[1]=p=>c.approveData(0))},[s.form.submit?(a(),o(f,{key:0},[x,z],64)):(a(),o("span",P,"Reject"))],2)]),default:m(()=>[t("div",E,[t("h2",null,i(s.form.title),1),t("i",null,"Waktu Permintaan : "+i(c.localDate(s.form.created_at)),1),H,R,t("p",null,i(s.form.detail),1)])]),_:1},8,["show"])])}const w=A(F,[["render",U],["__scopeId","data-v-17a5c7c9"]]);export{w as default};
