import{A as k}from"./AuthenticatedLayout-DE9KA9mo.js";import{M as D,a as C}from"./vue-multiselect.esm-BUUK8cfl.js";import{Z as A,c as r,a as n,F as b,_ as S,r as u,o as a,b as o,t as i,d as h,e as s,w as m,f,n as _,p as I,g as F}from"./app-BYDgDL2_.js";/* empty css                        */const M={layout:k,props:["datas"],components:{Head:A,Modal:D,Multiselect:C},data(){return{table:[{title:"Requestor",data:"requestor.name"},{title:"Status",data:"status",render:e=>{switch(e.status){case 0:return r("span",{class:"badge badge-warning"},[n("Waiting for Approval")]);case 1:return r("span",{class:"badge badge-success"},[n("Approved")]);case 2:return r("span",{class:"badge badge-danger"},[n("Rejected")]);default:return r("span",null,[n("Unknown")])}}},{title:"Created At",data:"created_at"},{title:"Created By",data:"creator.name"}],data:this.datas,selectedIds:[],errors:{},form:{}}},mounted(){this.resetForm()},methods:{detail(e){this.form=e,$("#modal-approval").modal("show")},async approveData(e){this.form.submit||(this.form.type=e,this.form.submit=!0,b.post(this.route("approval.action"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-approval").modal("hide"),this.$success("Data berhasil disimpan"),b.visit(this.$page.url,{only:["approval"]})},onError:()=>{this.form.submit=!1,this.$error()}}))},resetForm(e=null){this.form={id:(e==null?void 0:e.id)??null,requestor:(e==null?void 0:e.requestor)??{},approver:(e==null?void 0:e.approver)??{},detail:(e==null?void 0:e.detail)??"",status:0,submit:!1},this.errors={}},localDate(e){return new Date(e).toLocaleString()}}},l=e=>(I("data-v-17a5c7c9"),e=e(),F(),e),q={key:0,class:"alert alert-success",role:"alert"},B={key:1,class:"alert alert-danger",role:"alert"},L={class:"card shadow"},N=l(()=>s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-user"}),n(" Data Approval ")])],-1)),V=["onClick"],E={class:"bg-gray-100 p-4"},H=l(()=>s("br",null,null,-1)),R=l(()=>s("br",null,null,-1)),T=l(()=>s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),j=l(()=>s("span",{class:"bott"},"Loading",-1)),W={key:1,class:"bott"},x=l(()=>s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),z=l(()=>s("span",{class:"bott"},"Loading",-1)),P={key:1,class:"bott"};function U(e,d,Z,G,t,c){const v=u("Head"),g=u("Table"),y=u("Modal");return a(),o("div",null,[r(v,{title:"Approval"}),e.$page.props.flash.success?(a(),o("div",q,i(e.$page.props.flash.success),1)):h("",!0),e.$page.props.flash.error?(a(),o("div",B,i(e.$page.props.flash.error),1)):h("",!0),s("div",L,[N,r(g,{columns:t.table,rows:t.data},{actions:m(({row:p})=>[s("button",{onClick:J=>c.detail(p),class:"btn btn-warning btn-sm",title:"Edit"}," Detail",8,V),n("  ")]),_:1},8,["columns","rows"])]),r(y,{show:e.modalShow,title:"Data Approval",id:"modal-approval"},{footer:m(()=>[s("button",{type:"button",class:_(["btn btn-primary",{disabled:t.form.submit,disabled:t.form.status!=0}]),onClick:d[0]||(d[0]=p=>c.approveData(1))},[t.form.submit?(a(),o(f,{key:0},[T,j],64)):(a(),o("span",W,"Approve"))],2),s("button",{type:"button",class:_(["btn btn-danger",{disabled:t.form.submit,disabled:t.form.status!=0}]),onClick:d[1]||(d[1]=p=>c.approveData(0))},[t.form.submit?(a(),o(f,{key:0},[x,z],64)):(a(),o("span",P,"Reject"))],2)]),default:m(()=>[s("div",E,[s("h2",null,i(t.form.title),1),s("i",null,"Waktu Permintaan : "+i(c.localDate(t.form.created_at)),1),H,R,s("p",null,i(t.form.detail),1)])]),_:1},8,["show"])])}const Y=S(M,[["render",U],["__scopeId","data-v-17a5c7c9"]]);export{Y as default};
