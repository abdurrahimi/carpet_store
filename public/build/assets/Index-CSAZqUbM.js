import{A as ue}from"./AuthenticatedLayout-Ey72YXoO.js";import{M as he,a as fe}from"./vue-multiselect.esm-DCI4wgIb.js";import{Z as be,c as p,a as h,F as c,_ as _e,r as b,o as i,b as l,e as s,w as _,k as ge,t as d,d as u,n as m,i as g,v,l as ve,h as ye}from"./app-KNZD5g8g.js";/* empty css                        */const we={layout:ue,props:["store"],components:{Head:be,Modal:he,Multiselect:fe},data(){return{table:[{title:"Nama Store",data:"name"},{title:"Manajer / PIC",data:"manager.name"},{title:"Alamat",data:"address"},{title:"Nomor Telepon",data:"phone"},{title:"Tipe Store",data:"store_type",render:e=>e.store_type==1?p("span",null,[h("Cabang")]):p("span",null,[h("Gudang")])}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},data:this.store,karyawan:[]}},mounted(){this.resetForm(),this.getDataKaryawan()},methods:{createProduct(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Product",$("#modal-product-index").modal("show")},editRow(e){var t;this.getDataKaryawan((t=e.manager)==null?void 0:t.name),this.resetForm(),this.populateForm(e),this.form.account=e.account,this.modalTitle="Ubah Data Karyawan",$("#modal-product-index").modal("show")},deleteRow(e){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(e),!1)},deleteAction(e){c.delete(this.route("store.delete",e.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),c.visit(this.$page.url,{only:["store"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?c.post(this.route("store.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}):c.put(this.route("store.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}))}catch{this.form.submit=!1}},resetForm(){this.form={id:null,name:"",address:"",phone:"",store_type:"1",manager:{},submit:!1}},populateForm(e){this.form.id=e.id,this.form.name=e.name,this.form.address=e.address,this.form.phone=e.phone,this.form.store_type=e.store_type,this.form.manager=e.manager},async getDataKaryawan(e=""){let{data:t}=await axios.get(this.route("users.get",{name:e}));this.karyawan=t}}},ke={class:"text-right"},Se=s("i",{class:"fa fa-trash"},null,-1),Ce={key:0,class:"alert alert-success",role:"alert"},De={key:1,class:"alert alert-danger",role:"alert"},Te={class:"card shadow"},$e=s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-box"}),h(" Data Product ")])],-1),Me=["onClick"],Fe=["onClick"],Ve={class:"row"},Ne={class:"col-md-6 mb-3"},Pe={class:"form-group"},Re=s("label",{for:"name"},"Nama Store",-1),Ue={key:0,class:"invalid-feedback"},Ae={class:"col-md-6 mb-3"},Ee=s("label",{for:"toko_id",class:"form-label"},"Manager / PIC",-1),Ie={class:"text-danger"},Be={class:"col-md-6 mb-3"},Ke={class:"form-group"},He=s("label",{for:"phone"},"Nomor Telepon",-1),Ge={key:0,class:"invalid-feedback"},Le={class:"col-md-6 mb-3"},je={class:"form-group"},qe=s("label",{for:"store_type"},"Tipe Store",-1),ze=s("option",{value:"1"},"Cabang",-1),Ye=s("option",{value:"2"},"Gudang",-1),Ze=[ze,Ye],Je={key:0,class:"invalid-feedback"},Oe={class:"row"},Qe={class:"col-md-12 mb-3"},We={class:"form-group"},Xe=s("label",{for:"address"},"Alamat",-1),xe={key:0,class:"invalid-feedback"},es={key:0},ss=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),ts=s("span",{class:"bott"},"Loading",-1),os=[ss,ts],rs={key:1,class:"bott"};function as(e,t,is,ls,o,n){const de=b("Head"),me=b("Table"),pe=b("Multiselect"),ce=b("Modal");return i(),l("div",null,[p(de,{title:"Data Store"}),s("div",ke,[p(ge,{name:"fade"},{default:_(()=>[s("button",{class:m([o.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:t[0]||(t[0]=(...r)=>e.deleteSelected&&e.deleteSelected(...r))},[Se,h(" Delete Bulk ")],2)]),_:1}),s("button",{class:"btn btn-primary mb-2",type:"button",onClick:t[1]||(t[1]=(...r)=>n.createProduct&&n.createProduct(...r))}," + Data Baru ")]),e.$page.props.flash.success?(i(),l("div",Ce,d(e.$page.props.flash.success),1)):u("",!0),e.$page.props.flash.error?(i(),l("div",De,d(e.$page.props.flash.error),1)):u("",!0),s("div",Te,[$e,p(me,{columns:o.table,rows:o.data,"onUpdate:selectedRows":n.handleSelectedRows},{actions:_(({row:r})=>[s("button",{onClick:f=>n.editRow(r),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,Me),h("  "),s("button",{onClick:f=>n.deleteRow(r),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,Fe)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),p(ce,{show:o.modalShow,title:o.modalTitle,id:"modal-product-index"},{footer:_(()=>[s("button",{type:"button",class:m(["btn btn-primary",{disabled:o.form.submit}]),onClick:t[8]||(t[8]=(...r)=>n.submitForm&&n.submitForm(...r))},[o.form.submit?(i(),l("div",es,os)):(i(),l("span",rs,"Save"))],2)]),default:_(()=>{var r,f,y,w,k,S,C,D,T,M,F,V,N,P,R,U,A,E,I,B,K,H,G,L,j,q,z,Y,Z,J,O,Q,W,X,x,ee,se,te,oe,re,ae,ie,le,ne;return[s("form",{ref:"formProduct",onSubmit:t[7]||(t[7]=ye((...a)=>e.handleSubmit&&e.handleSubmit(...a),["prevent"]))},[s("div",Ve,[s("div",Ne,[s("div",Pe,[Re,g(s("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>o.form.name=a),class:m(["form-control",{"is-invalid":(y=(f=(r=e.$page)==null?void 0:r.props)==null?void 0:f.errors)==null?void 0:y.name}]),id:"name",required:""},null,2),[[v,o.form.name]]),(S=(k=(w=e.$page)==null?void 0:w.props)==null?void 0:k.errors)!=null&&S.name?(i(),l("div",Ue,d((T=(D=(C=e.$page)==null?void 0:C.props)==null?void 0:D.errors)==null?void 0:T.name),1)):u("",!0)])]),s("div",Ae,[Ee,p(pe,{modelValue:o.form.manager,"onUpdate:modelValue":t[3]||(t[3]=a=>o.form.manager=a),options:o.karyawan,"track-by":"id",label:"name",onSearchChange:n.getDataKaryawan,"internal-search":!1,class:m({"is-invalid":(N=(V=(F=(M=e.$page)==null?void 0:M.props)==null?void 0:F.errors)==null?void 0:V.manager)==null?void 0:N.id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",Ie,d((A=(U=(R=(P=e.$page)==null?void 0:P.props)==null?void 0:R.errors)==null?void 0:U.manager)==null?void 0:A.id),1)]),s("div",Be,[s("div",Ke,[He,g(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>o.form.phone=a),class:m(["form-control",{"is-invalid":(B=(I=(E=e.$page)==null?void 0:E.props)==null?void 0:I.errors)==null?void 0:B.phone}]),id:"phone"},null,2),[[v,o.form.phone]]),(G=(H=(K=e.$page)==null?void 0:K.props)==null?void 0:H.errors)!=null&&G.phone?(i(),l("div",Ge,d((q=(j=(L=e.$page)==null?void 0:L.props)==null?void 0:j.errors)==null?void 0:q.phone),1)):u("",!0)])]),s("div",Le,[s("div",je,[qe,g(s("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.form.store_type=a),class:m(["form-control",{"is-invalid":(Z=(Y=(z=e.$page)==null?void 0:z.props)==null?void 0:Y.errors)==null?void 0:Z.store_type}]),id:"store_type"},Ze,2),[[ve,o.form.store_type]]),(Q=(O=(J=e.$page)==null?void 0:J.props)==null?void 0:O.errors)!=null&&Q.store_type?(i(),l("div",Je,d((x=(X=(W=e.$page)==null?void 0:W.props)==null?void 0:X.errors)==null?void 0:x.store_type),1)):u("",!0)])])]),s("div",Oe,[s("div",Qe,[s("div",We,[Xe,g(s("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.form.address=a),class:m(["form-control",{"is-invalid":(te=(se=(ee=e.$page)==null?void 0:ee.props)==null?void 0:se.errors)==null?void 0:te.address}]),id:"address"},null,2),[[v,o.form.address]]),(ae=(re=(oe=e.$page)==null?void 0:oe.props)==null?void 0:re.errors)!=null&&ae.address?(i(),l("div",xe,d((ne=(le=(ie=e.$page)==null?void 0:ie.props)==null?void 0:le.errors)==null?void 0:ne.address),1)):u("",!0)])])])],544)]}),_:1},8,["show","title"])])}const cs=_e(we,[["render",as]]);export{cs as default};
