import{A as g}from"./AuthenticatedLayout-DSjCnYg_.js";import{M as y,a as k}from"./vue-multiselect.esm-BjcRBDul.js";import{Z as C,c as s,a,F as u,_ as D,r as i,o,b as l,t as m,d as h,e as t,w as f,f as A,n as S,p as I,g as F}from"./app-DmorRH6b.js";/* empty css                        */const M={layout:g,props:["datas"],components:{Head:C,Modal:y,Multiselect:k},data(){return{table:[{title:"Requestor",data:"requestor.name"},{title:"Detail",data:"detail"},{title:"Status",data:"status",render:e=>{switch(e.status){case 0:return s("span",null,[a("Pending")]);case 1:return s("span",null,[a("Approved")]);case 2:return s("span",null,[a("Rejected")]);default:return s("span",null,[a("Unknown")])}}},{title:"Created At",data:"created_at"},{title:"Created By",data:"creator.name"}],data:this.datas,selectedIds:[],errors:{},form:{}}},mounted(){this.resetForm()},methods:{detail(e){},async approveData(){this.form.submit||(this.form.submit=!0,u.post(this.form.id?this.route("category.update",this.form.id):this.route("category.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),u.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}))},resetForm(e=null){this.form={id:(e==null?void 0:e.id)??null,requestor:(e==null?void 0:e.requestor)??{},approver:(e==null?void 0:e.approver)??{},detail:(e==null?void 0:e.detail)??"",status:0,submit:!1},this.errors={}}}},c=e=>(I("data-v-ed68ccd0"),e=e(),F(),e),q={key:0,class:"alert alert-success",role:"alert"},B={key:1,class:"alert alert-danger",role:"alert"},N={class:"card shadow"},V=c(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-user"}),a(" Data Approval ")])],-1)),E=["onClick"],H=c(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),T=c(()=>t("span",{class:"bott"},"Loading",-1)),L={key:1,class:"bott"};function R(e,p,j,x,r,d){const _=i("Head"),b=i("Table"),v=i("Modal");return o(),l("div",null,[s(_,{title:"Approval"}),e.$page.props.flash.success?(o(),l("div",q,m(e.$page.props.flash.success),1)):h("",!0),e.$page.props.flash.error?(o(),l("div",B,m(e.$page.props.flash.error),1)):h("",!0),t("div",N,[V,s(b,{columns:r.table,rows:r.data},{actions:f(({row:n})=>[t("button",{onClick:z=>d.detail(n),class:"btn btn-warning btn-sm",title:"Edit"}," Detail",8,E),a("  ")]),_:1},8,["columns","rows"])]),s(v,{show:e.modalShow,title:"Data Approval",id:"modal-add"},{footer:f(()=>[t("button",{type:"button",class:S(["btn btn-primary",{disabled:r.form.submit,disabled:r.form.status!=0}]),onClick:p[0]||(p[0]=(...n)=>d.approveData&&d.approveData(...n))},[r.form.submit?(o(),l(A,{key:0},[H,T],64)):(o(),l("span",L,"Approve"))],2)]),_:1},8,["show"])])}const J=D(M,[["render",R],["__scopeId","data-v-ed68ccd0"]]);export{J as default};
