import{A as Ge}from"./AuthenticatedLayout-BU37uFwa.js";import{M as Qe,a as Xe}from"./vue-multiselect.esm-DYO3Cmdh.js";import{_ as xe,Z as es,z as c,H as ze,y as b,o as h,c as f,a as u,b as s,m as y,p as ss,t as n,d as qe,n as l,x as w,F as os,e as i,v as p,f as rs,w as ts,C as as,D as ls}from"./app-TGxf9uSF.js";/* empty css                        */const ns={layout:Ge,props:["users"],components:{Head:es,Modal:Qe,Multiselect:Xe},data(){return{table:[{title:"Nama Karyawan",data:"name"},{title:"NIK",data:"nik"},{title:"Email",data:"email"},{title:"Nomor Handphone",data:"phone"},{title:"NPWP",data:"npwp"},{title:"Leader",data:"leader.name"},{title:"Store",data:"store.name"},{title:"Created At",data:"created_at"},{title:"Created By",data:"creator.name"}],data:this.users,modalTitle:"",modalShow:!1,selectedIds:[],form:{id:null,name:"",nik:"",alamat:"",phone:"",npwp:"",salary_per_day:"",salary_per_month:"",join_date:new Date().toISOString().substr(0,10),leader_id:null,toko_id:null,jabatan:{},email:"",leader_id:"",is_account:!1,password:"",submit:!1,edit:!1},karyawan:[],store:[]}},mounted(){this.getDataUsers(),this.getDataStore()},methods:{createUser(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Karyawan",$("#modal-add").modal("show")},editRow(e){var o,g;this.resetForm(),this.populateForm(e),this.getDataUsers((o=e.leader)==null?void 0:o.name),this.getDataStore((g=e.store)==null?void 0:g.name),console.log(e),this.form.account=e.account,this.modalTitle="Ubah Data Karyawan",$("#modal-add").modal("show")},deleteRow(e){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(e),!1)},deleteAction(e){c.delete(this.route("users.destroy",e.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},async deleteSelected(){c.post(this.route("users.massDestroy"),{ids:this.selectedIds},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},async getDataUsers(e=""){let{data:o}=await ze.get(this.route("users.get",{name:e}));this.karyawan=o},async getDataStore(e=""){let{data:o}=await ze.get(this.route("store.get",{name:e}));this.store=o},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?c.post(this.route("users.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}):c.put(this.route("users.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}))}catch{this.form.submit=!1}},resetForm(){this.form={id:null,name:"",nik:"",alamat:"",phone:"",npwp:"",salary_per_day:"",salary_per_month:"",join_date:new Date().toISOString().substr(0,10),leader_id:null,toko_id:null,email:"",leader_id:"",is_account:!1,password:"",submit:!1,edit:!1}},populateForm(e){this.form.id=e.id||null,this.form.name=e.name||"",this.form.nik=e.nik||"",this.form.alamat=e.address||"",this.form.phone=e.phone||"",this.form.npwp=e.npwp||"",this.form.salary_per_day=e.salary_per_day||"",this.form.salary_per_month=e.salary_per_month||"",this.form.join_date=e.join_date?new Date(e.join_date).toISOString().substr(0,10):new Date().toISOString().substr(0,10),this.form.leader_id=e.leader||null,this.form.toko_id=e.store||null,this.form.email=e.email||"",this.form.is_account=!!e.account}}},a=e=>(as("data-v-e06f357d"),e=e(),ls(),e),is={class:"text-right"},ds=a(()=>s("i",{class:"fa fa-trash"},null,-1)),ms={key:0,class:"alert alert-success",role:"alert"},ps={key:1,class:"alert alert-danger",role:"alert"},cs={class:"card shadow"},us=a(()=>s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-user"}),w(" Data Karyawan ")])],-1)),hs=["onClick"],fs=["onClick"],_s={class:"row"},bs={class:"col-md-6 mb-3"},ys=a(()=>s("label",{for:"name",class:"form-label"},"Name",-1)),gs={class:"text-danger"},ws={class:"col-md-6 mb-3"},vs=a(()=>s("label",{for:"nik",class:"form-label"},"NIK",-1)),ks={class:"text-danger"},Ss={class:"col-md-12 mb-3"},Ds=a(()=>s("label",{for:"alamat",class:"form-label"},"Address",-1)),Us={class:"text-danger"},Vs={class:"col-md-6 mb-3"},Cs=a(()=>s("label",{for:"phone",class:"form-label"},"Phone",-1)),Es={class:"text-danger"},Is={class:"col-md-6 mb-3"},Ns=a(()=>s("label",{for:"npwp",class:"form-label"},"NPWP",-1)),Ps={class:"text-danger"},js={class:"col-md-6 mb-3"},Ms=a(()=>s("label",{for:"salary_per_day",class:"form-label"},"Salary Per Day",-1)),Fs={class:"text-danger"},Ks={class:"col-md-6 mb-3"},Ts=a(()=>s("label",{for:"salary_per_month",class:"form-label"},"Salary Per Month",-1)),As={class:"text-danger"},Rs={class:"col-md-6 mb-3"},Bs=a(()=>s("label",{for:"join_date",class:"form-label"},"Join Date",-1)),Hs={class:"text-danger"},Ls={class:"col-md-6 mb-3"},Os=a(()=>s("label",{for:"leader_id",class:"form-label"},"Leader ID",-1)),$s={class:"text-danger"},Ws={class:"col-md-6 mb-3"},zs=a(()=>s("label",{for:"toko_id",class:"form-label"},"Store",-1)),qs={class:"text-danger"},Js={class:"col-md-6 mb-3"},Ys=a(()=>s("label",{for:"email",class:"form-label"},"Email",-1)),Zs={class:"text-danger"},Gs={class:"col-md-6 mb-3"},Qs={class:"form-check"},Xs=a(()=>s("label",{for:"is_account",class:"form-check-label"},"Buatkan Akun?",-1)),xs={class:"text-danger"},eo=a(()=>s("label",{for:"password",class:"form-label"},"Password",-1)),so=["placeholder"],oo={class:"text-danger"},ro=a(()=>s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),to=a(()=>s("span",{class:"bott"},"Loading",-1)),ao={key:1,class:"bott"};function lo(e,o,g,no,r,d){const Je=b("Head"),Ye=b("Table"),v=b("Multiselect"),Ze=b("Modal");return h(),f("div",null,[u(Je,{title:"Karyawan"}),s("div",is,[u(ss,{name:"fade"},{default:y(()=>[s("button",{class:l([r.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...m)=>d.deleteSelected&&d.deleteSelected(...m))},[ds,w(" Delete Bulk ")],2)]),_:1}),s("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...m)=>d.createUser&&d.createUser(...m))}," + Data Baru ")]),e.$page.props.flash.success?(h(),f("div",ms,n(e.$page.props.flash.success),1)):qe("",!0),e.$page.props.flash.error?(h(),f("div",ps,n(e.$page.props.flash.error),1)):qe("",!0),s("div",cs,[us,u(Ye,{columns:r.table,rows:r.data,"onUpdate:selectedRows":d.handleSelectedRows},{actions:y(({row:m})=>[s("button",{onClick:_=>d.editRow(m),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,hs),w("  "),s("button",{onClick:_=>d.deleteRow(m),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,fs)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),u(Ze,{show:r.modalShow,title:r.modalTitle,id:"modal-add"},{footer:y(()=>[s("button",{type:"button",class:l(["btn btn-primary",{disabled:r.form.submit}]),onClick:o[17]||(o[17]=(...m)=>d.submitForm&&d.submitForm(...m))},[r.form.submit?(h(),f(os,{key:0},[ro,to],64)):(h(),f("span",ao,"Save"))],2)]),default:y(()=>{var m,_,k,S,D,U,V,C,E,I,N,P,j,M,F,K,T,A,R,B,H,L,O,W,z,q,J,Y,Z,G,Q,X,x,ee,se,oe,re,te,ae,le,ne,ie,de,me,pe,ce,ue,he,fe,_e,be,ye,ge,we,ve,ke,Se,De,Ue,Ve,Ce,Ee,Ie,Ne,Pe,je,Me,Fe,Ke,Te,Ae,Re,Be,He,Le,Oe,$e,We;return[s("form",{ref:"formKaryawan",onSubmit:o[16]||(o[16]=ts((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"]))},[s("div",_s,[i(s("input",{type:"hidden","onUpdate:modelValue":o[2]||(o[2]=t=>r.form.id=t)},null,512),[[p,r.form.id]]),s("div",bs,[ys,i(s("input",{type:"text",id:"name","onUpdate:modelValue":o[3]||(o[3]=t=>r.form.name=t),class:l(["form-control",{"is-invalid":(k=(_=(m=e.$page)==null?void 0:m.props)==null?void 0:_.errors)==null?void 0:k.name}]),placeholder:"Enter Name",required:""},null,2),[[p,r.form.name]]),s("span",gs,n((U=(D=(S=e.$page)==null?void 0:S.props)==null?void 0:D.errors)==null?void 0:U.name),1)]),s("div",ws,[vs,i(s("input",{type:"text",id:"nik","onUpdate:modelValue":o[4]||(o[4]=t=>r.form.nik=t),class:l(["form-control",{"is-invalid":(E=(C=(V=e.$page)==null?void 0:V.props)==null?void 0:C.errors)==null?void 0:E.nik}]),placeholder:"Enter NIK"},null,2),[[p,r.form.nik]]),s("span",ks,n((P=(N=(I=e.$page)==null?void 0:I.props)==null?void 0:N.errors)==null?void 0:P.nik),1)]),s("div",Ss,[Ds,i(s("textarea",{id:"alamat","onUpdate:modelValue":o[5]||(o[5]=t=>r.form.alamat=t),class:l(["form-control",{"is-invalid":(F=(M=(j=e.$page)==null?void 0:j.props)==null?void 0:M.errors)==null?void 0:F.alamat}]),rows:"3",placeholder:"Enter Address"},null,2),[[p,r.form.alamat]]),s("span",Us,n((A=(T=(K=e.$page)==null?void 0:K.props)==null?void 0:T.errors)==null?void 0:A.alamat),1)]),s("div",Vs,[Cs,i(s("input",{type:"text",id:"phone","onUpdate:modelValue":o[6]||(o[6]=t=>r.form.phone=t),class:l(["form-control",{"is-invalid":(H=(B=(R=e.$page)==null?void 0:R.props)==null?void 0:B.errors)==null?void 0:H.phone}]),placeholder:"Enter Phone Number"},null,2),[[p,r.form.phone]]),s("span",Es,n((W=(O=(L=e.$page)==null?void 0:L.props)==null?void 0:O.errors)==null?void 0:W.phone),1)]),s("div",Is,[Ns,i(s("input",{type:"text",id:"npwp","onUpdate:modelValue":o[7]||(o[7]=t=>r.form.npwp=t),class:l(["form-control",{"is-invalid":(J=(q=(z=e.$page)==null?void 0:z.props)==null?void 0:q.errors)==null?void 0:J.npwp}]),placeholder:"Enter NPWP"},null,2),[[p,r.form.npwp]]),s("span",Ps,n((G=(Z=(Y=e.$page)==null?void 0:Y.props)==null?void 0:Z.errors)==null?void 0:G.npwp),1)]),s("div",js,[Ms,i(s("input",{type:"number",id:"salary_per_day","onUpdate:modelValue":o[8]||(o[8]=t=>r.form.salary_per_day=t),class:l(["form-control",{"is-invalid":(x=(X=(Q=e.$page)==null?void 0:Q.props)==null?void 0:X.errors)==null?void 0:x.salary_per_day}]),placeholder:"Enter Salary Per Day"},null,2),[[p,r.form.salary_per_day]]),s("span",Fs,n((oe=(se=(ee=e.$page)==null?void 0:ee.props)==null?void 0:se.errors)==null?void 0:oe.salary_per_day),1)]),s("div",Ks,[Ts,i(s("input",{type:"number",id:"salary_per_month","onUpdate:modelValue":o[9]||(o[9]=t=>r.form.salary_per_month=t),class:l(["form-control",{"is-invalid":(ae=(te=(re=e.$page)==null?void 0:re.props)==null?void 0:te.errors)==null?void 0:ae.salary_per_month}]),placeholder:"Enter Salary Per Month"},null,2),[[p,r.form.salary_per_month]]),s("span",As,n((ie=(ne=(le=e.$page)==null?void 0:le.props)==null?void 0:ne.errors)==null?void 0:ie.salary_per_month),1)]),s("div",Rs,[Bs,i(s("input",{type:"date",id:"join_date","onUpdate:modelValue":o[10]||(o[10]=t=>r.form.join_date=t),class:l(["form-control",{"is-invalid":(pe=(me=(de=e.$page)==null?void 0:de.props)==null?void 0:me.errors)==null?void 0:pe.join_date}])},null,2),[[p,r.form.join_date]]),s("span",Hs,n((he=(ue=(ce=e.$page)==null?void 0:ce.props)==null?void 0:ue.errors)==null?void 0:he.join_date),1)]),s("div",Ls,[Os,u(v,{modelValue:r.form.leader_id,"onUpdate:modelValue":o[11]||(o[11]=t=>r.form.leader_id=t),options:r.karyawan,"track-by":"id",label:"name",onSearchChange:d.getDataUsers,"internal-search":!1,class:l({"is-invalid":(be=(_e=(fe=e.$page)==null?void 0:fe.props)==null?void 0:_e.errors)==null?void 0:be.leader_id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",$s,n((we=(ge=(ye=e.$page)==null?void 0:ye.props)==null?void 0:ge.errors)==null?void 0:we.leader_id),1)]),s("div",Ws,[zs,u(v,{modelValue:r.form.toko_id,"onUpdate:modelValue":o[12]||(o[12]=t=>r.form.toko_id=t),options:r.store,"track-by":"id",label:"name",onSearchChange:d.getDataStore,"internal-search":!1,class:l({"is-invalid":(Se=(ke=(ve=e.$page)==null?void 0:ve.props)==null?void 0:ke.errors)==null?void 0:Se.toko_id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",qs,n((Ve=(Ue=(De=e.$page)==null?void 0:De.props)==null?void 0:Ue.errors)==null?void 0:Ve.toko_id),1)]),s("div",Js,[Ys,i(s("input",{type:"email",id:"email","onUpdate:modelValue":o[13]||(o[13]=t=>r.form.email=t),class:l(["form-control",{"is-invalid":(Ie=(Ee=(Ce=e.$page)==null?void 0:Ce.props)==null?void 0:Ee.errors)==null?void 0:Ie.email}]),placeholder:"Enter Email"},null,2),[[p,r.form.email]]),s("span",Zs,n((je=(Pe=(Ne=e.$page)==null?void 0:Ne.props)==null?void 0:Pe.errors)==null?void 0:je.email),1)]),s("div",Gs,[s("div",Qs,[i(s("input",{type:"checkbox",id:"is_account","onUpdate:modelValue":o[14]||(o[14]=t=>r.form.is_account=t),class:l(["form-check-input",{"is-invalid":(Ke=(Fe=(Me=e.$page)==null?void 0:Me.props)==null?void 0:Fe.errors)==null?void 0:Ke.is_account}])},null,2),[[rs,r.form.is_account]]),Xs]),s("span",xs,n((Re=(Ae=(Te=e.$page)==null?void 0:Te.props)==null?void 0:Ae.errors)==null?void 0:Re.is_account),1)]),s("div",{class:l(["col-md-6 mb-3 fade",{show:r.form.is_account}])},[eo,i(s("input",{type:"password",id:"password","onUpdate:modelValue":o[15]||(o[15]=t=>r.form.password=t),class:l(["form-control",{"is-invalid":(Le=(He=(Be=e.$page)==null?void 0:Be.props)==null?void 0:He.errors)==null?void 0:Le.password}]),placeholder:r.form.account?"Change or Let it empty":"Enter Password"},null,10,so),[[p,r.form.password]]),s("span",oo,n((We=($e=(Oe=e.$page)==null?void 0:Oe.props)==null?void 0:$e.errors)==null?void 0:We.password),1)],2)])],544)]}),_:1},8,["show","title"])])}const uo=xe(ns,[["render",lo],["__scopeId","data-v-e06f357d"]]);export{uo as default};
