import{A as re}from"./AuthenticatedLayout-pqXKvyNS.js";import{M as ae,a as ie}from"./vue-multiselect-Csrzy6bE.js";import{Z as le,a as u,x as h,y as n,_ as de,A as v,o as i,c as l,b as s,m as b,p as ne,t as m,d as p,n as c,e as _,v as g,B as me,w as pe}from"./app-hO94-DmL.js";const ce={layout:re,props:["store"],components:{Head:le,Modal:ae,Multiselect:ie},data(){return{table:[{title:"Nama Store",data:"name"},{title:"Alamat",data:"address"},{title:"Nomor Telepon",data:"phone"},{title:"Tipe Store",data:"store_type",render:e=>e.store_type==1?u("span",null,[h("Cabang")]):u("span",null,[h("Gudang")])}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},data:this.store}},mounted(){this.resetForm()},methods:{createProduct(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Product",$("#modal-product-index").modal("show")},editRow(e){this.resetForm(),this.populateForm(e),this.form.account=e.account,this.modalTitle="Ubah Data Karyawan",$("#modal-product-index").modal("show")},deleteRow(e){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(e),!1)},deleteAction(e){n.delete(this.route("store.delete",e.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),n.visit(this.$page.url,{only:["store"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?n.post(this.route("store.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),n.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}):n.put(this.route("store.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),n.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}))}catch(e){console.log(e),this.form.submit=!1}},resetForm(){this.form={id:null,name:"",address:"",phone:"",store_type:"1",submit:!1}},populateForm(e){this.form.id=e.id,this.form.name=e.name,this.form.address=e.address,this.form.phone=e.phone,this.form.store_type=e.store_type}}},ue={class:"text-right"},he=s("i",{class:"fa fa-trash"},null,-1),fe={key:0,class:"alert alert-success",role:"alert"},be={key:1,class:"alert alert-danger",role:"alert"},_e={class:"card shadow"},ve=s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-box"}),h(" Data Product")])],-1),ge=["onClick"],ye=["onClick"],we={class:"row"},Se={class:"col-md-6 mb-3"},ke={class:"form-group"},$e=s("label",{for:"name"},"Nama Store",-1),Te={key:0,class:"invalid-feedback"},Ce={class:"col-md-6 mb-3"},De={class:"form-group"},Fe=s("label",{for:"phone"},"Nomor Telepon",-1),Me={key:0,class:"invalid-feedback"},Ne={class:"row"},Re={class:"col-md-6 mb-3"},Ve={class:"form-group"},Ae=s("label",{for:"address"},"Alamat",-1),Ue={key:0,class:"invalid-feedback"},Be={class:"col-md-6 mb-3"},Ee={class:"form-group"},Pe=s("label",{for:"store_type"},"Tipe Store",-1),Ie=s("option",{value:"1"},"Cabang",-1),He=s("option",{value:"2"},"Gudang",-1),Ge=[Ie,He],Le={key:0,class:"invalid-feedback"},qe={key:0},ze=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Ke=s("span",{class:"bott"},"Loading",-1),Ye=[ze,Ke],Ze={key:1,class:"bott"};function je(e,o,Je,Oe,t,d){const se=v("Head"),oe=v("Table"),te=v("Modal");return i(),l("div",null,[u(se,{title:"Data Store"}),s("div",ue,[u(ne,{name:"fade"},{default:b(()=>[s("button",{class:c([t.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...r)=>e.deleteSelected&&e.deleteSelected(...r))},[he,h(" Delete Bulk ")],2)]),_:1}),s("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...r)=>d.createProduct&&d.createProduct(...r))}," + Data Baru ")]),e.$page.props.flash.success?(i(),l("div",fe,m(e.$page.props.flash.success),1)):p("",!0),e.$page.props.flash.error?(i(),l("div",be,m(e.$page.props.flash.error),1)):p("",!0),s("div",_e,[ve,u(oe,{columns:t.table,rows:t.data,"onUpdate:selectedRows":d.handleSelectedRows},{actions:b(({row:r})=>[s("button",{onClick:f=>d.editRow(r),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,ge),h("  "),s("button",{onClick:f=>d.deleteRow(r),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,ye)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),u(te,{show:t.modalShow,title:t.modalTitle,id:"modal-product-index"},{footer:b(()=>[s("button",{type:"button",class:c(["btn btn-primary",{disabled:t.form.submit}]),onClick:o[7]||(o[7]=(...r)=>d.submitForm&&d.submitForm(...r))},[t.form.submit?(i(),l("div",qe,Ye)):(i(),l("span",Ze,"Save"))],2)]),default:b(()=>{var r,f,y,w,S,k,T,C,D,F,M,N,R,V,A,U,B,E,P,I,H,G,L,q,z,K,Y,Z,j,J,O,Q,W,X,x,ee;return[s("form",{ref:"formProduct",onSubmit:o[6]||(o[6]=pe((...a)=>e.handleSubmit&&e.handleSubmit(...a),["prevent"]))},[s("div",we,[s("div",Se,[s("div",ke,[$e,_(s("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>t.form.name=a),class:c(["form-control",{"is-invalid":(y=(f=(r=e.$page)==null?void 0:r.props)==null?void 0:f.errors)==null?void 0:y.name}]),id:"name",required:""},null,2),[[g,t.form.name]]),(k=(S=(w=e.$page)==null?void 0:w.props)==null?void 0:S.errors)!=null&&k.name?(i(),l("div",Te,m((D=(C=(T=e.$page)==null?void 0:T.props)==null?void 0:C.errors)==null?void 0:D.name),1)):p("",!0)])]),s("div",Ce,[s("div",De,[Fe,_(s("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=a=>t.form.phone=a),class:c(["form-control",{"is-invalid":(N=(M=(F=e.$page)==null?void 0:F.props)==null?void 0:M.errors)==null?void 0:N.phone}]),id:"phone"},null,2),[[g,t.form.phone]]),(A=(V=(R=e.$page)==null?void 0:R.props)==null?void 0:V.errors)!=null&&A.phone?(i(),l("div",Me,m((E=(B=(U=e.$page)==null?void 0:U.props)==null?void 0:B.errors)==null?void 0:E.phone),1)):p("",!0)])])]),s("div",Ne,[s("div",Re,[s("div",Ve,[Ae,_(s("textarea",{"onUpdate:modelValue":o[4]||(o[4]=a=>t.form.address=a),class:c(["form-control",{"is-invalid":(H=(I=(P=e.$page)==null?void 0:P.props)==null?void 0:I.errors)==null?void 0:H.address}]),id:"address"},null,2),[[g,t.form.address]]),(q=(L=(G=e.$page)==null?void 0:G.props)==null?void 0:L.errors)!=null&&q.address?(i(),l("div",Ue,m((Y=(K=(z=e.$page)==null?void 0:z.props)==null?void 0:K.errors)==null?void 0:Y.address),1)):p("",!0)])]),s("div",Be,[s("div",Ee,[Pe,_(s("select",{"onUpdate:modelValue":o[5]||(o[5]=a=>t.form.store_type=a),class:c(["form-control",{"is-invalid":(J=(j=(Z=e.$page)==null?void 0:Z.props)==null?void 0:j.errors)==null?void 0:J.store_type}]),id:"store_type"},Ge,2),[[me,t.form.store_type]]),(W=(Q=(O=e.$page)==null?void 0:O.props)==null?void 0:Q.errors)!=null&&W.store_type?(i(),l("div",Le,m((ee=(x=(X=e.$page)==null?void 0:X.props)==null?void 0:x.errors)==null?void 0:ee.store_type),1)):p("",!0)])])])],544)]}),_:1},8,["show","title"])])}const xe=de(ce,[["render",je]]);export{xe as default};
