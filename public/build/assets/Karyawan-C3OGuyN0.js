import{A as os}from"./AuthenticatedLayout-CYvgjY2K.js";import{M as ts}from"./Modal-iMdzk-6u.js";import{_ as rs,Z as as,F as c,E as Qe,r as y,o as _,b as f,c as u,e,w as g,k as ls,t as n,d as Xe,n as l,a as v,f as ns,i,v as m,j as is,l as ds,h as ps,p as ms,g as cs}from"./app-CUebUM7Q.js";import{M as hs}from"./vue-multiselect.esm-DrWtARSN.js";/* empty css                        */const us={layout:os,props:["users"],components:{Head:as,Modal:ts,Multiselect:hs},data(){return{table:[{title:"Nama Karyawan",data:"name"},{title:"NIK",data:"nik"},{title:"Email",data:"email"},{title:"Nomor Handphone",data:"phone"},{title:"NPWP",data:"npwp"},{title:"Leader",data:"leader.name"},{title:"Store",data:"store.name"},{title:"Created At",data:"created_at"},{title:"Created By",data:"creator.name"}],data:this.users,modalTitle:"",modalShow:!1,selectedIds:[],form:{id:null,name:"",nik:"",alamat:"",phone:"",npwp:"",salary_per_day:"",salary_per_month:"",join_date:new Date().toISOString().substr(0,10),leader_id:null,toko_id:null,jabatan:{},email:"",leader_id:"",is_account:!1,password:"",submit:!1,edit:!1},karyawan:[],store:[]}},mounted(){this.getDataUsers(),this.getDataStore()},methods:{createUser(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Karyawan",$("#modal-add").modal("show")},editRow(s){var o,h;this.resetForm(),this.populateForm(s),this.getDataUsers((o=s.leader)==null?void 0:o.name),this.getDataStore((h=s.store)==null?void 0:h.name),console.log(s),this.form.account=s.account,this.modalTitle="Ubah Data Karyawan",$("#modal-add").modal("show")},deleteRow(s){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(s),!1)},deleteAction(s){c.delete(this.route("users.destroy",s.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},handleSelectedRows(s){this.selectedIds=s},async deleteSelected(){this.$confirm("You won't be able to revert this!",()=>this.deleteSelectedAction(),!1)},async deleteSelectedAction(){c.post(this.route("users.massDestroy"),{ids:this.selectedIds},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},async getDataUsers(s=""){let{data:o}=await Qe.get(this.route("users.get",{name:s}));this.karyawan=o},async getDataStore(s=""){let{data:o}=await Qe.get(this.route("store.get",{name:s}));this.store=o},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?c.post(this.route("users.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}):c.put(this.route("users.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),c.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}))}catch{this.form.submit=!1}},resetForm(){this.form={id:null,name:"",nik:"",alamat:"",phone:"",npwp:"",salary_per_day:"",salary_per_month:"",join_date:new Date().toISOString().substr(0,10),leader_id:null,toko_id:null,email:"",leader_id:"",is_account:!1,password:"",role:"",submit:!1,edit:!1}},populateForm(s){var o,h;this.form.id=s.id||null,this.form.name=s.name||"",this.form.nik=s.nik||"",this.form.alamat=s.address||"",this.form.phone=s.phone||"",this.form.npwp=s.npwp||"",this.form.salary_per_day=s.salary_per_day||"",this.form.salary_per_month=s.salary_per_month||"",this.form.join_date=s.join_date?new Date(s.join_date).toISOString().substr(0,10):new Date().toISOString().substr(0,10),this.form.leader_id=s.leader||null,this.form.toko_id=s.store||null,this.form.email=s.email||"",this.form.role=((h=(o=s==null?void 0:s.account)==null?void 0:o.roles[0])==null?void 0:h.name)||"",this.form.is_account=!!s.account}}},a=s=>(ms("data-v-f263a83d"),s=s(),cs(),s),_s={class:"text-right"},fs=a(()=>e("i",{class:"fa fa-trash"},null,-1)),bs={key:0,class:"alert alert-success",role:"alert"},ys={key:1,class:"alert alert-danger",role:"alert"},gs={class:"card shadow"},vs=a(()=>e("div",{class:"card-header"},[e("h4",{class:"card-title"},[e("i",{class:"fa fa-user"}),v(" Data Karyawan ")])],-1)),ws=["onClick"],Ss=["onClick"],ks={class:"row"},Ds={class:"col-md-6 mb-3"},Us=a(()=>e("label",{for:"name",class:"form-label"},"Name",-1)),Vs={class:"text-danger"},Es={class:"col-md-6 mb-3"},Cs=a(()=>e("label",{for:"nik",class:"form-label"},"NIK",-1)),Is={class:"text-danger"},Ns={class:"col-md-12 mb-3"},Ms=a(()=>e("label",{for:"alamat",class:"form-label"},"Address",-1)),Ps={class:"text-danger"},js={class:"col-md-6 mb-3"},Fs=a(()=>e("label",{for:"phone",class:"form-label"},"Phone",-1)),As={class:"text-danger"},Ks={class:"col-md-6 mb-3"},Rs=a(()=>e("label",{for:"npwp",class:"form-label"},"NPWP",-1)),Ts={class:"text-danger"},Bs={class:"col-md-6 mb-3"},Hs=a(()=>e("label",{for:"salary_per_day",class:"form-label"},"Salary Per Day",-1)),Ls={class:"text-danger"},Os={class:"col-md-6 mb-3"},Ws=a(()=>e("label",{for:"salary_per_month",class:"form-label"},"Salary Per Month",-1)),$s={class:"text-danger"},Ys={class:"col-md-6 mb-3"},qs=a(()=>e("label",{for:"join_date",class:"form-label"},"Join Date",-1)),zs={class:"text-danger"},Js={class:"col-md-6 mb-3"},Zs=a(()=>e("label",{for:"leader_id",class:"form-label"},"Leader ID",-1)),Gs={class:"text-danger"},Qs={class:"col-md-6 mb-3"},Xs=a(()=>e("label",{for:"toko_id",class:"form-label"},"Store",-1)),xs={class:"text-danger"},eo={class:"col-md-6 mb-3"},so=a(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),oo={class:"text-danger"},to={class:"col-md-12 mb-3"},ro={class:"form-check"},ao=a(()=>e("label",{for:"is_account",class:"form-check-label"},"Buatkan Akun?",-1)),lo={class:"text-danger"},no=a(()=>e("label",{for:"password",class:"form-label"},"Password",-1)),io=["placeholder"],po={class:"text-danger"},mo=a(()=>e("label",{for:"role",class:"form-label"},"Role",-1)),co=a(()=>e("option",{value:"",disabled:"",selected:""},"Select Role",-1)),ho=a(()=>e("option",{value:"super_admin"},"Super Admin",-1)),uo=a(()=>e("option",{value:"admin"},"Admin",-1)),_o=a(()=>e("option",{value:"owner"},"Owner",-1)),fo=a(()=>e("option",{value:"warehouse_head"},"Warehouse Head",-1)),bo=a(()=>e("option",{value:"warehouse"},"Warehouse Staff",-1)),yo=a(()=>e("option",{value:"finance_head"},"Finance Head",-1)),go=a(()=>e("option",{value:"finance"},"Finance Staff",-1)),vo=a(()=>e("option",{value:"sales_head"},"Sales Head",-1)),wo=a(()=>e("option",{value:"sales"},"Sales Staff",-1)),So=[co,ho,uo,_o,fo,bo,yo,go,vo,wo],ko={class:"text-danger"},Do=a(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Uo=a(()=>e("span",{class:"bott"},"Loading",-1)),Vo={key:1,class:"bott"};function Eo(s,o,h,Co,t,d){const xe=y("Head"),es=y("Table"),w=y("Multiselect"),ss=y("Modal");return _(),f("div",null,[u(xe,{title:"Karyawan"}),e("div",_s,[u(ls,{name:"fade"},{default:g(()=>[e("button",{class:l([t.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...p)=>d.deleteSelected&&d.deleteSelected(...p))},[fs,v(" Delete Bulk ")],2)]),_:1}),e("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...p)=>d.createUser&&d.createUser(...p))}," + Data Baru ")]),s.$page.props.flash.success?(_(),f("div",bs,n(s.$page.props.flash.success),1)):Xe("",!0),s.$page.props.flash.error?(_(),f("div",ys,n(s.$page.props.flash.error),1)):Xe("",!0),e("div",gs,[vs,u(es,{columns:t.table,rows:t.data,"onUpdate:selectedRows":d.handleSelectedRows},{actions:g(({row:p})=>[e("button",{onClick:b=>d.editRow(p),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,ws),v("  "),e("button",{onClick:b=>d.deleteRow(p),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,Ss)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),u(ss,{show:t.modalShow,title:t.modalTitle,id:"modal-add"},{footer:g(()=>[e("button",{type:"button",class:l(["btn btn-primary",{disabled:t.form.submit}]),onClick:o[18]||(o[18]=(...p)=>d.submitForm&&d.submitForm(...p))},[t.form.submit?(_(),f(ns,{key:0},[Do,Uo],64)):(_(),f("span",Vo,"Save"))],2)]),default:g(()=>{var p,b,S,k,D,U,V,E,C,I,N,M,P,j,F,A,K,R,T,B,H,L,O,W,Y,q,z,J,Z,G,Q,X,x,ee,se,oe,te,re,ae,le,ne,ie,de,pe,me,ce,he,ue,_e,fe,be,ye,ge,ve,we,Se,ke,De,Ue,Ve,Ee,Ce,Ie,Ne,Me,Pe,je,Fe,Ae,Ke,Re,Te,Be,He,Le,Oe,We,$e,Ye,qe,ze,Je,Ze,Ge;return[e("form",{ref:"formKaryawan",onSubmit:o[17]||(o[17]=ps((...r)=>s.handleSubmit&&s.handleSubmit(...r),["prevent"]))},[e("div",ks,[i(e("input",{type:"hidden","onUpdate:modelValue":o[2]||(o[2]=r=>t.form.id=r)},null,512),[[m,t.form.id]]),e("div",Ds,[Us,i(e("input",{type:"text",id:"name","onUpdate:modelValue":o[3]||(o[3]=r=>t.form.name=r),class:l(["form-control",{"is-invalid":(S=(b=(p=s.$page)==null?void 0:p.props)==null?void 0:b.errors)==null?void 0:S.name}]),placeholder:"Enter Name",required:""},null,2),[[m,t.form.name]]),e("span",Vs,n((U=(D=(k=s.$page)==null?void 0:k.props)==null?void 0:D.errors)==null?void 0:U.name),1)]),e("div",Es,[Cs,i(e("input",{type:"text",id:"nik","onUpdate:modelValue":o[4]||(o[4]=r=>t.form.nik=r),class:l(["form-control",{"is-invalid":(C=(E=(V=s.$page)==null?void 0:V.props)==null?void 0:E.errors)==null?void 0:C.nik}]),placeholder:"Enter NIK"},null,2),[[m,t.form.nik]]),e("span",Is,n((M=(N=(I=s.$page)==null?void 0:I.props)==null?void 0:N.errors)==null?void 0:M.nik),1)]),e("div",Ns,[Ms,i(e("textarea",{id:"alamat","onUpdate:modelValue":o[5]||(o[5]=r=>t.form.alamat=r),class:l(["form-control",{"is-invalid":(F=(j=(P=s.$page)==null?void 0:P.props)==null?void 0:j.errors)==null?void 0:F.alamat}]),rows:"3",placeholder:"Enter Address"},null,2),[[m,t.form.alamat]]),e("span",Ps,n((R=(K=(A=s.$page)==null?void 0:A.props)==null?void 0:K.errors)==null?void 0:R.alamat),1)]),e("div",js,[Fs,i(e("input",{type:"text",id:"phone","onUpdate:modelValue":o[6]||(o[6]=r=>t.form.phone=r),class:l(["form-control",{"is-invalid":(H=(B=(T=s.$page)==null?void 0:T.props)==null?void 0:B.errors)==null?void 0:H.phone}]),placeholder:"Enter Phone Number"},null,2),[[m,t.form.phone]]),e("span",As,n((W=(O=(L=s.$page)==null?void 0:L.props)==null?void 0:O.errors)==null?void 0:W.phone),1)]),e("div",Ks,[Rs,i(e("input",{type:"text",id:"npwp","onUpdate:modelValue":o[7]||(o[7]=r=>t.form.npwp=r),class:l(["form-control",{"is-invalid":(z=(q=(Y=s.$page)==null?void 0:Y.props)==null?void 0:q.errors)==null?void 0:z.npwp}]),placeholder:"Enter NPWP"},null,2),[[m,t.form.npwp]]),e("span",Ts,n((G=(Z=(J=s.$page)==null?void 0:J.props)==null?void 0:Z.errors)==null?void 0:G.npwp),1)]),e("div",Bs,[Hs,i(e("input",{type:"number",id:"salary_per_day","onUpdate:modelValue":o[8]||(o[8]=r=>t.form.salary_per_day=r),class:l(["form-control",{"is-invalid":(x=(X=(Q=s.$page)==null?void 0:Q.props)==null?void 0:X.errors)==null?void 0:x.salary_per_day}]),placeholder:"Enter Salary Per Day"},null,2),[[m,t.form.salary_per_day]]),e("span",Ls,n((oe=(se=(ee=s.$page)==null?void 0:ee.props)==null?void 0:se.errors)==null?void 0:oe.salary_per_day),1)]),e("div",Os,[Ws,i(e("input",{type:"number",id:"salary_per_month","onUpdate:modelValue":o[9]||(o[9]=r=>t.form.salary_per_month=r),class:l(["form-control",{"is-invalid":(ae=(re=(te=s.$page)==null?void 0:te.props)==null?void 0:re.errors)==null?void 0:ae.salary_per_month}]),placeholder:"Enter Salary Per Month"},null,2),[[m,t.form.salary_per_month]]),e("span",$s,n((ie=(ne=(le=s.$page)==null?void 0:le.props)==null?void 0:ne.errors)==null?void 0:ie.salary_per_month),1)]),e("div",Ys,[qs,i(e("input",{type:"date",id:"join_date","onUpdate:modelValue":o[10]||(o[10]=r=>t.form.join_date=r),class:l(["form-control",{"is-invalid":(me=(pe=(de=s.$page)==null?void 0:de.props)==null?void 0:pe.errors)==null?void 0:me.join_date}])},null,2),[[m,t.form.join_date]]),e("span",zs,n((ue=(he=(ce=s.$page)==null?void 0:ce.props)==null?void 0:he.errors)==null?void 0:ue.join_date),1)]),e("div",Js,[Zs,u(w,{modelValue:t.form.leader_id,"onUpdate:modelValue":o[11]||(o[11]=r=>t.form.leader_id=r),options:t.karyawan,"track-by":"id",label:"name",onSearchChange:d.getDataUsers,"internal-search":!1,class:l({"is-invalid":(be=(fe=(_e=s.$page)==null?void 0:_e.props)==null?void 0:fe.errors)==null?void 0:be.leader_id})},null,8,["modelValue","options","onSearchChange","class"]),e("span",Gs,n((ve=(ge=(ye=s.$page)==null?void 0:ye.props)==null?void 0:ge.errors)==null?void 0:ve.leader_id),1)]),e("div",Qs,[Xs,u(w,{modelValue:t.form.toko_id,"onUpdate:modelValue":o[12]||(o[12]=r=>t.form.toko_id=r),options:t.store,"track-by":"id",label:"name",onSearchChange:d.getDataStore,"internal-search":!1,class:l({"is-invalid":(ke=(Se=(we=s.$page)==null?void 0:we.props)==null?void 0:Se.errors)==null?void 0:ke.toko_id})},null,8,["modelValue","options","onSearchChange","class"]),e("span",xs,n((Ve=(Ue=(De=s.$page)==null?void 0:De.props)==null?void 0:Ue.errors)==null?void 0:Ve.toko_id),1)]),e("div",eo,[so,i(e("input",{type:"email",id:"email","onUpdate:modelValue":o[13]||(o[13]=r=>t.form.email=r),class:l(["form-control",{"is-invalid":(Ie=(Ce=(Ee=s.$page)==null?void 0:Ee.props)==null?void 0:Ce.errors)==null?void 0:Ie.email}]),placeholder:"Enter Email"},null,2),[[m,t.form.email]]),e("span",oo,n((Pe=(Me=(Ne=s.$page)==null?void 0:Ne.props)==null?void 0:Me.errors)==null?void 0:Pe.email),1)]),e("div",to,[e("div",ro,[i(e("input",{type:"checkbox",id:"is_account","onUpdate:modelValue":o[14]||(o[14]=r=>t.form.is_account=r),class:l(["form-check-input",{"is-invalid":(Ae=(Fe=(je=s.$page)==null?void 0:je.props)==null?void 0:Fe.errors)==null?void 0:Ae.is_account}])},null,2),[[is,t.form.is_account]]),ao]),e("span",lo,n((Te=(Re=(Ke=s.$page)==null?void 0:Ke.props)==null?void 0:Re.errors)==null?void 0:Te.is_account),1)]),e("div",{class:l(["col-md-6 mb-3 fade",{show:t.form.is_account}])},[no,i(e("input",{type:"password",id:"password","onUpdate:modelValue":o[15]||(o[15]=r=>t.form.password=r),class:l(["form-control",{"is-invalid":(Le=(He=(Be=s.$page)==null?void 0:Be.props)==null?void 0:He.errors)==null?void 0:Le.password}]),placeholder:t.form.account?"Change or Let it empty":"Enter Password"},null,10,io),[[m,t.form.password]]),e("span",po,n(($e=(We=(Oe=s.$page)==null?void 0:Oe.props)==null?void 0:We.errors)==null?void 0:$e.password),1)],2),e("div",{class:l(["col-md-6 mb-3 fade",{show:t.form.is_account}])},[mo,i(e("select",{id:"role","onUpdate:modelValue":o[16]||(o[16]=r=>t.form.role=r),class:l(["form-control form-select",{"is-invalid":(ze=(qe=(Ye=s.$page)==null?void 0:Ye.props)==null?void 0:qe.errors)==null?void 0:ze.role}])},So,2),[[ds,t.form.role]]),e("span",ko,n((Ge=(Ze=(Je=s.$page)==null?void 0:Je.props)==null?void 0:Ze.errors)==null?void 0:Ge.role),1)],2)])],544)]}),_:1},8,["show","title"])])}const Fo=rs(us,[["render",Eo],["__scopeId","data-v-f263a83d"]]);export{Fo as default};
