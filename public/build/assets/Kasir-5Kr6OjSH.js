import{A as dt}from"./AuthenticatedLayout-BpgTmOaQ.js";import{M as it,a as ct}from"./vue-multiselect-Ct0g21Ay.js";import{Z as pt,_ as ut,y as b,o as d,c as i,a as h,t as c,d as f,b as t,F as et,z as at,e as u,v as _,n as v,A as _t,B as mt,C as ht,x as ft,l as gt}from"./app-XKJXP1mp.js";const bt={layout:dt,props:["data"],components:{Head:pt,Modal:it,Multiselect:ct},data(){return{table:[{title:"Tanggal",data:"created_at"},{title:"Toko",data:"store.name"},{title:"Jumlah",data:"total"}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},products:[],variant:null,store:[],supplier:[{id:2,name:"xx"}]}},mounted(){this.resetForm(),this.getProducts()},methods:{async getProducts(o=""){try{const{data:l}=await axios.get(this.route("products.get",{search:o}));this.products=l}catch(l){console.error("Error loading products",l)}},resetForm(){this.form={data:[{product:null,qty:0,discount_price:0,discount_percentage:0}],customer:null,discount:0,discount_percentage:0,additional:[{name:"",total:0}],total:0}},tambahProduct(){this.form.data.push({product:null,qty:0,discount_price:0,discount_percentage:0,variant:null})},tambahFee(){this.form.additional.push({name:"",total:0})},removeAdditional(o){o!=0&&this.form.additional.splice(o,1)},removeProduct(o){o!=0&&this.form.data.splice(o,1)},addCustomer(){console.log("okok")},pilihData(o){const l=this.form.data[o].product;this.form.data[o].unit_price=l.unit_price??0}}},a=o=>(_t("data-v-48f8c41d"),o=o(),mt(),o),vt={key:0,class:"alert alert-success",role:"alert"},Vt={key:1,class:"alert alert-danger",role:"alert"},yt={class:"card shadow mb-5"},Pt={class:"card-body"},Ct={id:"form-kasir"},Ut={class:"table"},wt=a(()=>t("thead",null,null,-1)),xt={class:"nt",style:{width:"20%"}},St={class:"form-group"},Tt=a(()=>t("label",{for:"product_id",class:"form-label"},"Produk",-1)),At={class:"text-danger"},Dt={class:"nt",style:{width:"10%"}},Ft={class:"form-group"},Mt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Jumlah (Meter)",-1)),jt={class:"input-group"},Rt=["onUpdate:modelValue"],It=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"Meter")],-1)),Ht={class:"text-danger"},Nt={class:"nt",style:{width:"15%"}},qt={class:"form-group"},Bt=a(()=>t("label",{for:"product_id",class:"form-label"},"Variants",-1)),Kt={class:"text-danger"},zt={class:"nt"},Et={class:"form-group"},Jt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Unit Price",-1)),Lt={class:"input-group"},kt=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Ot=["onUpdate:modelValue"],Zt={class:"text-danger"},Gt={class:"nt"},Qt={class:"form-group"},Wt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (Rp)",-1)),Xt={class:"input-group"},Yt=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),$t=["onUpdate:modelValue"],to={class:"text-danger"},oo={class:"nt",style:{width:"8%"}},so={class:"form-group"},eo=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (%)",-1)),ao={class:"input-group"},lo=["onUpdate:modelValue"],no=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),ro={class:"text-danger"},io={class:"nt",style:{width:"20%"}},co={class:"form-group"},po=ht('<label for="jumlah" class="form-label" data-v-48f8c41d>Total Price</label><div class="input-group" data-v-48f8c41d><div class="input-group-prepend" data-v-48f8c41d><span class="input-group-text" data-v-48f8c41d>Rp</span></div><input type="number" class="form-control" value="0" disabled data-v-48f8c41d></div>',2),uo={class:"text-danger"},_o={class:"nt align-middle"},mo=["onClick"],ho=["rowspan"],fo=a(()=>t("label",null,"Additional Fee",-1)),go=[fo],bo={colspan:"2"},vo={class:"form-group"},Vo={for:"additional_fee",class:"form-label"},yo=["onUpdate:modelValue"],Po={class:"form-group"},Co=a(()=>t("label",{for:"additional_fee",class:"form-label"},"Harga",-1)),Uo={class:"input-group"},wo=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),xo=["onUpdate:modelValue"],So={class:"nt align-middle"},To=["onClick"],Ao=a(()=>t("td",{colspan:"5"},"Discount",-1)),Do={class:"form-group"},Fo={class:"input-group"},Mo=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),jo={class:"form-group"},Ro={class:"input-group"},Io=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Ho=a(()=>t("td",null,null,-1)),No=a(()=>t("tr",null,[t("td",{colspan:"6"},"Total Transaksi"),t("td",null,[t("div",{class:"form-group"},[t("div",{class:"input-group"},[t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")]),t("input",{class:"form-control",type:"number",disabled:""})])])]),t("td")],-1)),qo=a(()=>t("td",{colspan:"6"},"Customer",-1)),Bo=a(()=>t("td",null,null,-1)),Ko=a(()=>t("tr",null,[t("td",{colspan:"5"},"Kasir"),t("td",null,[t("div",{class:"form-group"},[t("a",{class:"btn btn-primary float-right"},"Submit")])]),t("td")],-1)),zo={class:"card shadow"},Eo=a(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-box"}),ft("Â Data Penjualan Hari Ini ")])],-1));function Jo(o,l,lt,Lo,s,r){var V,y,P,C;const nt=b("Head"),g=b("Multiselect"),rt=b("Table");return d(),i("div",null,[h(nt,{title:"Kasir"}),o.$page.props.flash.success?(d(),i("div",vt,c(o.$page.props.flash.success),1)):f("",!0),o.$page.props.flash.error?(d(),i("div",Vt,c(o.$page.props.flash.error),1)):f("",!0),t("div",yt,[t("div",Pt,[t("form",Ct,[t("button",{class:"btn btn-primary btn-sm mb-2 float-right",type:"button",onClick:l[0]||(l[0]=(...m)=>r.tambahProduct&&r.tambahProduct(...m))}," + Tambah Product "),t("table",Ut,[wt,t("tbody",null,[(d(!0),i(et,null,at(s.form.data,(m,e)=>{var p,U,w,x,S,T,A,D,F,M,j,R,I,H,N,q,B,K,z,E,J,L,k,O,Z,G,Q,W,X,Y,$,tt,ot,st;return d(),i("tr",null,[t("td",xt,[t("div",St,[Tt,h(g,{modelValue:s.form.data[e].product,"onUpdate:modelValue":n=>s.form.data[e].product=n,options:s.products,"track-by":"id",placeholder:"Pilih Produk",label:"name",onSearchChange:r.getProducts,onSelect:n=>r.pilihData(e),"internal-search":!1,class:v({"is-invalid":(x=(w=(U=(p=o.$page)==null?void 0:p.props)==null?void 0:U.errors)==null?void 0:w.product)==null?void 0:x.id})},null,8,["modelValue","onUpdate:modelValue","options","onSearchChange","onSelect","class"]),t("span",At,c((D=(A=(T=(S=o.$page)==null?void 0:S.props)==null?void 0:T.errors)==null?void 0:A.product)==null?void 0:D.id),1)])]),t("td",Dt,[t("div",Ft,[Mt,t("div",jt,[u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>s.form.data[e].qty=n},null,8,Rt),[[_,s.form.data[e].qty]]),It]),t("span",Ht,c((R=(j=(M=(F=o.$page)==null?void 0:F.props)==null?void 0:M.errors)==null?void 0:j.product)==null?void 0:R.id),1)])]),t("td",Nt,[t("div",qt,[Bt,h(g,{modelValue:s.form.data[e].product,"onUpdate:modelValue":n=>s.form.data[e].product=n,options:s.products,"track-by":"id",placeholder:"Pilih Produk",label:"name",onSearchChange:r.getProducts,"internal-search":!1,class:v({"is-invalid":(q=(N=(H=(I=o.$page)==null?void 0:I.props)==null?void 0:H.errors)==null?void 0:N.product)==null?void 0:q.id})},null,8,["modelValue","onUpdate:modelValue","options","onSearchChange","class"]),t("span",Kt,c((E=(z=(K=(B=o.$page)==null?void 0:B.props)==null?void 0:K.errors)==null?void 0:z.product)==null?void 0:E.id),1)])]),t("td",zt,[t("div",Et,[Jt,t("div",Lt,[kt,u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>s.form.data[e].unit_price=n,disabled:""},null,8,Ot),[[_,s.form.data[e].unit_price]])]),t("span",Zt,c((O=(k=(L=(J=o.$page)==null?void 0:J.props)==null?void 0:L.errors)==null?void 0:k.product)==null?void 0:O.id),1)])]),t("td",Gt,[t("div",Qt,[Wt,t("div",Xt,[Yt,u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>s.form.data[e].discount_price=n},null,8,$t),[[_,s.form.data[e].discount_price]])]),t("span",to,c((Q=(G=(Z=o.$page)==null?void 0:Z.props)==null?void 0:G.errors)==null?void 0:Q.discount_price),1)])]),t("td",oo,[t("div",so,[eo,t("div",ao,[u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>s.form.data[e].discount_percentage=n},null,8,lo),[[_,s.form.data[e].discount_percentage]]),no]),t("span",ro,c((Y=(X=(W=o.$page)==null?void 0:W.props)==null?void 0:X.errors)==null?void 0:Y.discount_percentage),1)])]),t("td",io,[t("div",co,[po,t("span",uo,c((st=(ot=(tt=($=o.$page)==null?void 0:$.props)==null?void 0:tt.errors)==null?void 0:ot.product)==null?void 0:st.id),1)])]),t("td",_o,[u(t("a",{class:"btn btn-danger btn-sm",onClick:n=>r.removeProduct(e)},"x",8,mo),[[gt,e!=0]])])])}),256)),(d(!0),i(et,null,at(s.form.additional,(m,e)=>(d(),i("tr",{key:e},[e==0?(d(),i("td",{key:0,colspan:"4",rowspan:Object.keys(s.form.additional).length,class:"align-middle"},go,8,ho)):f("",!0),t("td",bo,[t("div",vo,[t("label",Vo," Additional Service "+c(e+1),1),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":p=>s.form.additional[e].name=p},null,8,yo),[[_,s.form.additional[e].name]])])]),t("td",null,[t("div",Po,[Co,t("div",Uo,[wo,u(t("input",{class:"form-control",type:"text","onUpdate:modelValue":p=>s.form.additional[e].total=p},null,8,xo),[[_,s.form.additional[e].total]])])])]),t("td",So,[e!=0?(d(),i("button",{key:0,class:"btn btn-danger btn-sm",onClick:p=>r.removeAdditional(e)}," x ",8,To)):f("",!0),e==0?(d(),i("button",{key:1,class:"btn btn-primary btn-sm",type:"button",onClick:l[1]||(l[1]=(...p)=>r.tambahFee&&r.tambahFee(...p))}," + ")):f("",!0)])]))),128)),t("tr",null,[Ao,t("td",null,[t("div",Do,[t("div",Fo,[u(t("input",{"onUpdate:modelValue":l[2]||(l[2]=m=>s.form.discount_percentage=m),class:"form-control",type:"number"},null,512),[[_,s.form.discount_percentage]]),Mo])])]),t("td",null,[t("div",jo,[t("div",Ro,[Io,u(t("input",{"onUpdate:modelValue":l[3]||(l[3]=m=>s.form.discount=m),class:"form-control",type:"number"},null,512),[[_,s.form.discount]])])])]),Ho]),No,t("tr",null,[qo,t("td",null,[h(g,{options:s.products,"track-by":"name",placeholder:"Pilih Produk",label:"name","tag-placeholder":"Add this as new customer",onSearchChange:r.getProducts,"internal-search":!1,taggable:!0,onTag:r.addCustomer,class:v({"is-invalid":(C=(P=(y=(V=o.$page)==null?void 0:V.props)==null?void 0:y.errors)==null?void 0:P.product)==null?void 0:C.id})},null,8,["options","onSearchChange","onTag","class"])]),Bo]),Ko])])])])]),t("div",zo,[Eo,h(rt,{columns:s.table,rows:lt.data},null,8,["columns","rows"])])])}const Go=ut(bt,[["render",Jo],["__scopeId","data-v-48f8c41d"]]);export{Go as default};
