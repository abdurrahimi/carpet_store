import{A as ve}from"./AuthenticatedLayout-DLu07heM.js";import{M as ye}from"./Modal-C2pIsuCI.js";import{Z as we,c as b,F as p,_ as Se,r as g,o as u,b as h,e,w as _,k as Ce,t as i,d as k,n as d,a as v,f as Fe,h as De,i as m,v as c,p as Ue,g as Re}from"./app-BfGSwodO.js";const Te={layout:ve,props:["datas"],components:{Head:we,Modal:ye},data(){return{table:[{title:"Created At",data:"phone_number",render:s=>b("img",{src:s.logo},null)},{title:"Nama",data:"name"},{title:"Telepon",data:"phone_number"},{title:"Bank",data:"bank_name"},{title:"No. Rekening",data:"bank_account_number"},{title:"Atas Nama",data:"bank_account_holder"}],data:this.datas,selectedIds:[],modalShow:!1,modalTitle:"",form:{}}},mounted(){this.resetForm()},methods:{createData(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Company",$("#modal-add").modal("show")},editRow(s){this.$page.props.errors=null,this.resetForm(s),this.modalTitle="Edit Company",$("#modal-add").modal("show")},resetForm(s={}){this.form={id:s.id||"",name:s.name||"",phone_number:s.phone_number||"",email:s.email||"",bank_name:s.bank_name||"",bank_account_number:s.bank_account_number||"",bank_account_holder:s.bank_account_holder||"",logo:null,code:s.code||"",address:s.address||"",preview:s.logo_url||null,submit:!1}},handleFileUpload(s){const o=s.target.files[0];o&&(this.form.logo=o,this.form.preview=URL.createObjectURL(o))},submitForm(){if(this.form.submit)return;console.log(this.form),this.form.submit=!0;const s=new FormData;for(const o in this.form)o==="submit"||o==="preview"||this.form[o]!==null&&s.append(o,this.form[o]);p.post(this.form.id?this.route("company.update",this.form.id):this.route("company.store"),s,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),p.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}})},deleteRow(s){this.$confirm("Yakin ingin hapus?",()=>this.deleteAction(s),!1)},deleteAction(s){p.post(this.route("company.delete"),{ids:[s.id]},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),p.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},handleSelectedRows(s){this.selectedIds=s},deleteSelected(){this.$confirm("Yakin hapus semua data terpilih?",this.deleteSelectedAction,!1)},deleteSelectedAction(){p.post(this.route("company.delete"),{ids:this.selectedIds},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),p.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})}}},l=s=>(Ue("data-v-b2a4d076"),s=s(),Re(),s),Ve={class:"text-right"},Ne=l(()=>e("i",{class:"fa fa-trash"},null,-1)),Ae={key:0,class:"alert alert-success",role:"alert"},Ie={key:1,class:"alert alert-danger",role:"alert"},Ee={class:"card shadow"},Be=l(()=>e("div",{class:"card-header"},[e("h4",{class:"card-title"},[e("i",{class:"fa fa-building"}),v(" Data Perusahaan ")])],-1)),Me=["onClick"],xe=["onClick"],Le={class:"row"},$e={class:"col-md-6 mb-3"},Pe=l(()=>e("label",{for:"name",class:"form-label"},"Nama Perusahaan",-1)),qe={class:"text-danger"},He={class:"col-md-6 mb-3"},Ye=l(()=>e("label",{for:"code",class:"form-label"},"Kode Perusahaan",-1)),je={class:"text-danger"},ze={class:"col-md-6 mb-3"},Ke=l(()=>e("label",{for:"address",class:"form-label"},"Alamat Perusahaan",-1)),Oe={class:"text-danger"},Ze={class:"col-md-6 mb-3"},Ge=l(()=>e("label",{for:"phone",class:"form-label"},"No. Telepon",-1)),Je={class:"text-danger"},Qe={class:"col-md-6 mb-3"},We=l(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),Xe={class:"text-danger"},es={class:"col-md-6 mb-3"},ss=l(()=>e("label",{for:"bank",class:"form-label"},"Bank",-1)),os={class:"text-danger"},ts={class:"col-md-6 mb-3"},rs=l(()=>e("label",{for:"account",class:"form-label"},"No. Rekening",-1)),as={class:"text-danger"},ls={class:"col-md-6 mb-3"},ns=l(()=>e("label",{for:"holder",class:"form-label"},"Atas Nama",-1)),is={class:"text-danger"},ds={class:"col-md-6 mb-3"},ms=l(()=>e("label",{for:"logo",class:"form-label"},"Logo",-1)),cs={class:"text-danger"},ps={key:0,class:"mt-2"},us=["src"],hs=l(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),bs=l(()=>e("span",null,"Loading",-1)),fs={key:1};function _s(s,o,gs,ks,t,a){const _e=g("Head"),ge=g("Table"),ke=g("Modal");return u(),h("div",null,[b(_e,{title:"Company"}),e("div",Ve,[b(Ce,{name:"fade"},{default:_(()=>[e("button",{class:d([t.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...n)=>a.deleteSelected&&a.deleteSelected(...n))},[Ne,v(" Delete Bulk ")],2)]),_:1}),e("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...n)=>a.createData&&a.createData(...n))},"+ Data Baru")]),s.$page.props.flash.success?(u(),h("div",Ae,i(s.$page.props.flash.success),1)):k("",!0),s.$page.props.flash.error?(u(),h("div",Ie,i(s.$page.props.flash.error),1)):k("",!0),e("div",Ee,[Be,b(ge,{columns:t.table,rows:t.data,"onUpdate:selectedRows":a.handleSelectedRows},{actions:_(({row:n})=>[e("button",{onClick:f=>a.editRow(n),class:"btn btn-warning btn-sm",title:"Edit"},"Edit",8,Me),v("  "),e("button",{onClick:f=>a.deleteRow(n),class:"btn btn-danger btn-sm",title:"Delete"},"Delete",8,xe)]),_:1},8,["columns","rows","onUpdate:selectedRows"]),b(ke,{show:t.modalShow,title:t.modalTitle,id:"modal-add"},{footer:_(()=>[e("button",{type:"button",class:d(["btn btn-primary",{disabled:t.form.submit}]),onClick:o[12]||(o[12]=(...n)=>a.submitForm&&a.submitForm(...n))},[t.form.submit?(u(),h(Fe,{key:0},[hs,bs],64)):(u(),h("span",fs,"Save"))],2)]),default:_(()=>{var n,f,y,w,S,C,F,D,U,R,T,V,N,A,I,E,B,M,x,L,P,q,H,Y,j,z,K,O,Z,G,J,Q,W,X,ee,se,oe,te,re,ae,le,ne,ie,de,me,ce,pe,ue,he,be,fe;return[e("form",{ref:"formCompany",onSubmit:o[11]||(o[11]=De((...r)=>a.submitForm&&a.submitForm(...r),["prevent"])),enctype:"multipart/form-data"},[e("div",Le,[e("div",$e,[Pe,m(e("input",{type:"text",id:"name","onUpdate:modelValue":o[2]||(o[2]=r=>t.form.name=r),class:d(["form-control",{"is-invalid":(y=(f=(n=s.$page)==null?void 0:n.props)==null?void 0:f.errors)==null?void 0:y.name}]),required:""},null,2),[[c,t.form.name]]),e("span",qe,i((C=(S=(w=s.$page)==null?void 0:w.props)==null?void 0:S.errors)==null?void 0:C.name),1)]),e("div",He,[Ye,m(e("input",{type:"text",id:"code","onUpdate:modelValue":o[3]||(o[3]=r=>t.form.code=r),class:d(["form-control",{"is-invalid":(U=(D=(F=s.$page)==null?void 0:F.props)==null?void 0:D.errors)==null?void 0:U.code}]),required:""},null,2),[[c,t.form.code]]),e("span",je,i((V=(T=(R=s.$page)==null?void 0:R.props)==null?void 0:T.errors)==null?void 0:V.code),1)]),e("div",ze,[Ke,m(e("textarea",{type:"text",id:"address","onUpdate:modelValue":o[4]||(o[4]=r=>t.form.address=r),class:d(["form-control",{"is-invalid":(I=(A=(N=s.$page)==null?void 0:N.props)==null?void 0:A.errors)==null?void 0:I.address}]),required:""},null,2),[[c,t.form.address]]),e("span",Oe,i((M=(B=(E=s.$page)==null?void 0:E.props)==null?void 0:B.errors)==null?void 0:M.address),1)]),e("div",Ze,[Ge,m(e("input",{type:"text",id:"phone","onUpdate:modelValue":o[5]||(o[5]=r=>t.form.phone_number=r),class:d(["form-control",{"is-invalid":(P=(L=(x=s.$page)==null?void 0:x.props)==null?void 0:L.errors)==null?void 0:P.phone_number}])},null,2),[[c,t.form.phone_number]]),e("span",Je,i((Y=(H=(q=s.$page)==null?void 0:q.props)==null?void 0:H.errors)==null?void 0:Y.phone_number),1)]),e("div",Qe,[We,m(e("input",{type:"text",id:"email","onUpdate:modelValue":o[6]||(o[6]=r=>t.form.email=r),class:d(["form-control",{"is-invalid":(K=(z=(j=s.$page)==null?void 0:j.props)==null?void 0:z.errors)==null?void 0:K.email}])},null,2),[[c,t.form.email]]),e("span",Xe,i((G=(Z=(O=s.$page)==null?void 0:O.props)==null?void 0:Z.errors)==null?void 0:G.email),1)]),e("div",es,[ss,m(e("input",{type:"text",id:"bank","onUpdate:modelValue":o[7]||(o[7]=r=>t.form.bank_name=r),class:d(["form-control",{"is-invalid":(W=(Q=(J=s.$page)==null?void 0:J.props)==null?void 0:Q.errors)==null?void 0:W.bank_name}])},null,2),[[c,t.form.bank_name]]),e("span",os,i((se=(ee=(X=s.$page)==null?void 0:X.props)==null?void 0:ee.errors)==null?void 0:se.bank_name),1)]),e("div",ts,[rs,m(e("input",{type:"text",id:"account","onUpdate:modelValue":o[8]||(o[8]=r=>t.form.bank_account_number=r),class:d(["form-control",{"is-invalid":(re=(te=(oe=s.$page)==null?void 0:oe.props)==null?void 0:te.errors)==null?void 0:re.bank_account_number}])},null,2),[[c,t.form.bank_account_number]]),e("span",as,i((ne=(le=(ae=s.$page)==null?void 0:ae.props)==null?void 0:le.errors)==null?void 0:ne.bank_account_number),1)]),e("div",ls,[ns,m(e("input",{type:"text",id:"holder","onUpdate:modelValue":o[9]||(o[9]=r=>t.form.bank_account_holder=r),class:d(["form-control",{"is-invalid":(me=(de=(ie=s.$page)==null?void 0:ie.props)==null?void 0:de.errors)==null?void 0:me.bank_account_holder}])},null,2),[[c,t.form.bank_account_holder]]),e("span",is,i((ue=(pe=(ce=s.$page)==null?void 0:ce.props)==null?void 0:pe.errors)==null?void 0:ue.bank_account_holder),1)]),e("div",ds,[ms,e("input",{type:"file",id:"logo",class:"form-control",onChange:o[10]||(o[10]=(...r)=>a.handleFileUpload&&a.handleFileUpload(...r))},null,32),e("span",cs,i((fe=(be=(he=s.$page)==null?void 0:he.props)==null?void 0:be.errors)==null?void 0:fe.logo),1),t.form.preview?(u(),h("div",ps,[e("img",{src:t.form.preview,height:"100"},null,8,us)])):k("",!0)])])],544)]}),_:1},8,["show","title"])])])}const Ss=Se(Te,[["render",_s],["__scopeId","data-v-b2a4d076"]]);export{Ss as default};
