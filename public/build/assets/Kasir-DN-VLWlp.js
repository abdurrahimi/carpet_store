import{A as k}from"./AuthenticatedLayout-bK__IP4A.js";import{M as $,a as tt}from"./vue-multiselect.esm-DEjfjvDO.js";import{Z as ot,_ as st,y as v,o as i,c as d,a as V,t as c,d as h,b as t,F as b,z as x,e as p,v as u,n as et,x as G,A as at,B as nt,l as lt}from"./app-DBKZgdbu.js";/* empty css                        */const rt={layout:k,props:["data"],components:{Head:ot,Modal:$,Multiselect:tt},data(){return{table:[{title:"Tanggal",data:"created_at"},{title:"Toko",data:"store.name"},{title:"Jumlah",data:"total"}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},products:[],variant:null,store:[],preview:null,variants:[{panjang:0,jumlah:0}],supplier:[{id:2,name:"xx"}]}},mounted(){this.resetForm(),this.getProducts()},methods:{totalUnitPrice(o){return this.form.data[o].unit_price*this.form.data[o].qty-this.form.data[o].discount_price},async getProducts(o=""){try{const{data:n}=await axios.get(this.route("products.get",{name:o}));this.products=n}catch(n){console.error("Error loading products",n)}},resetForm(){this.form={data:[{product:null,unit_top_price:0,qty:0,discount_price:0,discount_percentage:0,variants:[{panjang:0,jumlah:0}]}],customer:null,discount:0,discount_percentage:0,additional:[{name:"",total:0}],total:0}},tambahProduct(){this.form.data.push({product:null,qty:0,unit_top_price:0,discount_price:0,discount_percentage:0,variant:null})},tambahFee(){this.form.additional.push({name:"",total:0})},removeAdditional(o){o!=0&&this.form.additional.splice(o,1)},removeProduct(o){o!=0&&this.form.data.splice(o,1)},addCustomer(){console.log("okok")},pilihData(o){const n=this.form.data[o].product;this.form.data[o].unit_price=n.unit_top_price??0},calcDisPrice(o){this.form.data[o].discount_price=this.form.data[o].discount_percentage/100*(this.form.data[o].unit_price*this.form.data[o].qty)},calcDisPerc(o){this.form.data[o].discount_percentage=this.form.data[o].discount_price/(this.form.data[o].unit_price*this.form.data[o].qty)*100},formatMoney(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o)},tambahVariants(o){this.form.data[o].variants.push({panjang:0,jumlah:0})},removeVariant(o,n){this.form.data[o].variants.splice(n,1)}}},a=o=>(at("data-v-63837e4d"),o=o(),nt(),o),it={key:0,class:"alert alert-success",role:"alert"},dt={key:1,class:"alert alert-danger",role:"alert"},ct={class:"card shadow mb-5"},pt={class:"card-body"},ut={id:"form-kasir"},mt={class:"table"},_t=a(()=>t("thead",null,null,-1)),ht={rowspan:"3"},ft=["src"],gt={class:"nt",style:{width:"25%"}},bt={class:"form-group"},vt=a(()=>t("label",{for:"product_id",class:"form-label"},"Produk",-1)),Vt={class:"text-danger"},xt={class:"nt",style:{width:"15%"}},wt={class:"form-group"},yt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Jumlah (Meter)",-1)),Pt={class:"input-group"},Ut=["onUpdate:modelValue"],jt=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"Meter")],-1)),Ct={class:"text-danger"},Dt={class:"nt",style:{width:"30%"}},St={class:"form-group"},Mt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Unit Price",-1)),Tt={key:0},It={class:"input-group"},Ft=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Rt=["onUpdate:modelValue"],qt={class:"text-danger"},At={class:"nt align-middle",rowspan:"3"},Kt=["onClick"],zt={class:"nt",colspan:"3"},Ht={class:"col-md-12 row"},Nt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Variants",-1)),Bt=["onClick"],Jt=a(()=>t("span",{style:{"font-size":"10px"}},"+",-1)),Et=[Jt],Lt={class:"col-md-12"},Ot={class:"row"},Zt={class:"col-md-3 shadow mr-2 p-3 rounded-lg",style:{border:`1px solid
                                                                #f0f0f0`}},Gt=["onClick"],Qt={class:"row"},Wt={class:"col-md-6",style:{padding:"0px"}},Xt={class:"form-group"},Yt=a(()=>t("label",{for:"jumlah",class:"form-label",style:{"font-size":"12px"}},"Panjang",-1)),kt={class:"input-group"},$t=["onUpdate:modelValue"],to={class:"col-md-6",style:{}},oo={class:"form-group"},so=a(()=>t("label",{for:"jumlah",class:"form-label",style:{"font-size":"12px"}},"Jumlah",-1)),eo={class:"input-group"},ao=["onUpdate:modelValue"],no={class:"nt"},lo={class:"form-group"},ro=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (%)",-1)),io={class:"input-group"},co=["onKeyup","onUpdate:modelValue"],po=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),uo={class:"text-danger"},mo={class:"nt"},_o={class:"form-group"},ho=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (Rp)",-1)),fo={class:"input-group"},go=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),bo=["onKeyup","onUpdate:modelValue"],vo={class:"text-danger"},Vo={class:"nt"},xo={class:"form-group"},wo=a(()=>t("label",{for:"jumlah",class:"form-label"},"Total Price",-1)),yo={class:"input-group"},Po=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Uo=["value"],jo={class:"text-danger"},Co=["rowspan"],Do=a(()=>t("label",null,"Additional Fee",-1)),So=[Do],Mo={colspan:"2"},To={class:"form-group"},Io={for:"additional_fee",class:"form-label"},Fo=["onUpdate:modelValue"],Ro={class:"form-group"},qo=a(()=>t("label",{for:"additional_fee",class:"form-label"},"Harga",-1)),Ao={class:"input-group"},Ko=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),zo=["onUpdate:modelValue"],Ho={class:"nt align-middle"},No=["onClick"],Bo=a(()=>t("td",{colspan:"2"},"Discount",-1)),Jo={class:"form-group"},Eo={class:"input-group"},Lo=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),Oo={class:"form-group"},Zo={class:"input-group"},Go=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Qo=a(()=>t("td",null,null,-1)),Wo=a(()=>t("tr",null,[t("td",{colspan:"3"},"Total Transaksi"),t("td",null,[t("div",{class:"form-group"},[t("div",{class:"input-group"},[t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")]),t("input",{class:"form-control",type:"number",disabled:""})])])]),t("td")],-1)),Xo=a(()=>t("tr",null,[t("td",{colspan:"3"},"Kasir"),t("td",null,[t("div",{class:"form-group"},[t("a",{class:"btn btn-primary float-right"},"Submit")])]),t("td")],-1)),Yo={class:"card shadow"},ko=a(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-box"}),G(" Data Penjualan Hari Ini ")])],-1));function $o(o,n,Q,ts,e,l){const W=v("Head"),X=v("Multiselect"),Y=v("Table");return i(),d("div",null,[V(W,{title:"Kasir"}),o.$page.props.flash.success?(i(),d("div",it,c(o.$page.props.flash.success),1)):h("",!0),o.$page.props.flash.error?(i(),d("div",dt,c(o.$page.props.flash.error),1)):h("",!0),t("div",ct,[t("div",pt,[t("form",ut,[t("button",{class:"btn btn-primary btn-sm mb-2 float-right",type:"button",onClick:n[0]||(n[0]=(..._)=>l.tambahProduct&&l.tambahProduct(..._))}," + Tambah Product "),t("table",mt,[_t,t("tbody",null,[(i(!0),d(b,null,x(e.form.data,(_,s)=>{var m,w,y,P,U,j,C,D,S,M,T,I,F,R,q,A,K,z,H,N,B,J,E,L,O,Z;return i(),d(b,null,[t("tr",null,[t("td",ht,[t("img",{src:e.preview??"https://img.freepik.com/premium-vector/default-image-icon-vector-missing-picture-page-website-design-mobile-app-no-photo-available_87543-11093.jpg",alt:"Image Preview",class:"img-fluid",style:{"max-width":"300px"}},null,8,ft)]),t("td",gt,[t("div",bt,[vt,V(X,{modelValue:e.form.data[s].product,"onUpdate:modelValue":r=>e.form.data[s].product=r,options:e.products,"track-by":"id",placeholder:"Pilih Produk",label:"design_name",onSearchChange:l.getProducts,onSelect:r=>l.pilihData(s),"internal-search":!1,class:et({"is-invalid":(P=(y=(w=(m=o.$page)==null?void 0:m.props)==null?void 0:w.errors)==null?void 0:y.product)==null?void 0:P.id})},null,8,["modelValue","onUpdate:modelValue","options","onSearchChange","onSelect","class"]),t("span",Vt,c((D=(C=(j=(U=o.$page)==null?void 0:U.props)==null?void 0:j.errors)==null?void 0:C.product)==null?void 0:D.id),1)])]),t("td",xt,[t("div",wt,[yt,t("div",Pt,[p(t("input",{type:"number",class:"form-control",min:"0","onUpdate:modelValue":r=>e.form.data[s].qty=r},null,8,Ut),[[u,e.form.data[s].qty]]),jt]),t("span",Ct,c((I=(T=(M=(S=o.$page)==null?void 0:S.props)==null?void 0:M.errors)==null?void 0:T.product)==null?void 0:I.id),1)])]),t("td",Dt,[t("div",St,[Mt,e.form.data[s].product?(i(),d("span",Tt," ("+c(l.formatMoney(e.form.data[s].product.lowest_price))+" - "+c(l.formatMoney(e.form.data[s].product.lowest_price))+")",1)):h("",!0),t("div",It,[Ft,p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r=>e.form.data[s].unit_price=r},null,8,Rt),[[u,e.form.data[s].unit_price]])]),t("span",qt,c((A=(q=(R=(F=o.$page)==null?void 0:F.props)==null?void 0:R.errors)==null?void 0:q.product)==null?void 0:A.id),1)])]),t("td",At,[p(t("a",{class:"btn btn-danger btn-sm",onClick:r=>l.removeProduct(s)},"x",8,Kt),[[lt,s!=0]])])]),t("tr",null,[t("td",zt,[t("div",Ht,[Nt,G("   "),t("button",{class:"btn btn-primary btn-sm",type:"button",onClick:r=>l.tambahVariants(s)},Et,8,Bt),t("div",Lt,[t("div",Ot,[(i(!0),d(b,null,x(e.form.data[s].variants,(r,f)=>(i(),d("div",Zt,[f!==0?(i(),d("a",{key:0,class:"btn btn-danger btn-sm",onClick:g=>l.removeVariant(s,f),style:{position:"absolute",right:"-6px",top:"-6px"}},"x",8,Gt)):h("",!0),t("div",Qt,[t("div",Wt,[t("div",Xt,[Yt,t("div",kt,[p(t("input",{"onUpdate:modelValue":g=>e.form.data[s].variants[f].panjang=g,type:"number",class:"form-control",min:"0"},null,8,$t),[[u,e.form.data[s].variants[f].panjang]])])])]),t("div",to,[t("div",oo,[so,t("div",eo,[p(t("input",{type:"number","onUpdate:modelValue":g=>e.form.data[s].variants[f].jumlah=g,class:"form-control",min:"0"},null,8,ao),[[u,e.form.data[s].variants[f].jumlah]])])])])])]))),256))])])])])]),t("tr",null,[t("td",no,[t("div",lo,[ro,t("div",io,[p(t("input",{type:"number",class:"form-control",onKeyup:r=>l.calcDisPrice(s),"onUpdate:modelValue":r=>e.form.data[s].discount_percentage=r},null,40,co),[[u,e.form.data[s].discount_percentage]]),po]),t("span",uo,c((H=(z=(K=o.$page)==null?void 0:K.props)==null?void 0:z.errors)==null?void 0:H.discount_percentage),1)])]),t("td",mo,[t("div",_o,[ho,t("div",fo,[go,p(t("input",{type:"number",class:"form-control",onKeyup:r=>l.calcDisPerc(s),"onUpdate:modelValue":r=>e.form.data[s].discount_price=r},null,40,bo),[[u,e.form.data[s].discount_price]])]),t("span",vo,c((J=(B=(N=o.$page)==null?void 0:N.props)==null?void 0:B.errors)==null?void 0:J.discount_price),1)])]),t("td",Vo,[t("div",xo,[wo,t("div",yo,[Po,t("input",{type:"number",class:"form-control",value:l.totalUnitPrice(s),disabled:""},null,8,Uo)]),t("span",jo,c((Z=(O=(L=(E=o.$page)==null?void 0:E.props)==null?void 0:L.errors)==null?void 0:O.product)==null?void 0:Z.id),1)])])])],64)}),256)),(i(!0),d(b,null,x(e.form.additional,(_,s)=>(i(),d("tr",{key:s},[s==0?(i(),d("td",{key:0,rowspan:Object.keys(e.form.additional).length,class:"align-middle"},So,8,Co)):h("",!0),t("td",Mo,[t("div",To,[t("label",Io," Additional Service "+c(s+1),1),p(t("input",{type:"text",class:"form-control","onUpdate:modelValue":m=>e.form.additional[s].name=m},null,8,Fo),[[u,e.form.additional[s].name]])])]),t("td",null,[t("div",Ro,[qo,t("div",Ao,[Ko,p(t("input",{class:"form-control",type:"text","onUpdate:modelValue":m=>e.form.additional[s].total=m},null,8,zo),[[u,e.form.additional[s].total]])])])]),t("td",Ho,[s!=0?(i(),d("button",{key:0,class:"btn btn-danger btn-sm",onClick:m=>l.removeAdditional(s)}," x ",8,No)):h("",!0),s==0?(i(),d("button",{key:1,class:"btn btn-primary btn-sm",type:"button",onClick:n[1]||(n[1]=(...m)=>l.tambahFee&&l.tambahFee(...m))}," + ")):h("",!0)])]))),128)),t("tr",null,[Bo,t("td",null,[t("div",Jo,[t("div",Eo,[p(t("input",{"onUpdate:modelValue":n[2]||(n[2]=_=>e.form.discount_percentage=_),class:"form-control",type:"number"},null,512),[[u,e.form.discount_percentage]]),Lo])])]),t("td",null,[t("div",Oo,[t("div",Zo,[Go,p(t("input",{"onUpdate:modelValue":n[3]||(n[3]=_=>e.form.discount=_),class:"form-control",type:"number"},null,512),[[u,e.form.discount]])])])]),Qo]),Wo,Xo])])])])]),t("div",Yo,[ko,V(Y,{columns:e.table,rows:Q.data},null,8,["columns","rows"])])])}const ns=st(rt,[["render",$o],["__scopeId","data-v-63837e4d"]]);export{ns as default};
