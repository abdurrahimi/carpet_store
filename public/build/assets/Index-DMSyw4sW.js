import{A as z}from"./AuthenticatedLayout-yhs8aQxd.js";import{M as Z}from"./Modal-MymPnMDF.js";import{Z as G,c,a as b,F as m,_ as J,r as g,o as i,b as d,e as t,w as _,k as O,t as u,d as P,n as h,f as K,h as Q,i as v,v as q,l as W,m as X,p as ee,g as te}from"./app-BAwakVdd.js";import{M as se}from"./vue-multiselect.esm-C3jbW5ZR.js";/* empty css                        */const oe={layout:z,props:["datas"],components:{Head:G,Modal:Z,Multiselect:se},data(){return{table:[{title:"Category",data:"name"},{title:"Satuan Penjualan",data:"tipe_penjualan",render:e=>{switch(e.tipe_penjualan){case 1:return c("span",null,[b("Satuan")]);case 2:return c("span",null,[b("Meteran")])}}},{title:"Created At",data:"created_at",render:e=>c("span",null,[this.$timeFormat(e.created_at)])},{title:"Created By",data:"creator.name"}],data:this.datas,selectedIds:[],form:{},stores:[],modalShow:!1,modalTitle:"",errors:{}}},mounted(){this.resetForm()},methods:{createData(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Kategori Produk",$("#modal-add").modal("show")},editRow(e){this.$page.props.errors=null,this.resetForm(e),this.modalTitle="Ubah Data Kategori Produk",$("#modal-add").modal("show")},async submitForm(){this.form.submit||(this.form.submit=!0,m.post(this.form.id?this.route("category.update",this.form.id):this.route("category.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),m.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}))},deleteRow(e){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(e),!1)},deleteAction(e){m.post(this.route("category.delete"),{ids:[e.id]},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),m.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},deleteSelected(){this.$confirm("You won't be able to revert this!",()=>this.deleteSelectedAction(),!1)},deleteSelectedAction(){m.post(this.route("category.delete"),{ids:this.selectedIds},{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),m.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},resetForm(e=null){console.log(e),this.form={id:(e==null?void 0:e.id)??"",name:(e==null?void 0:e.name)??"",tipe_penjualan:(e==null?void 0:e.tipe_penjualan)??1,color:(e==null?void 0:e.color)??[{id:null,name:""}]}}}},a=e=>(ee("data-v-db44ed03"),e=e(),te(),e),re={class:"text-right"},le=a(()=>t("i",{class:"fa fa-trash"},null,-1)),ae={key:0,class:"alert alert-success",role:"alert"},ne={key:1,class:"alert alert-danger",role:"alert"},ie={class:"card shadow"},de=a(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-user"}),b(" Data Kategori Product ")])],-1)),ce=["onClick"],me=["onClick"],pe={class:"row"},ue={class:"col-md-6 mb-3"},he=a(()=>t("label",{for:"name",class:"form-label"},"Name",-1)),be={class:"text-danger"},fe={class:"col-md-6 mb-3"},_e=a(()=>t("label",{for:"type",class:"form-label"},"Satuan Penjualan",-1)),ge=a(()=>t("option",{value:""},"Select Type",-1)),ve=a(()=>t("option",{value:"1"},"Satuan",-1)),we=a(()=>t("option",{value:"2"},"Meteran",-1)),Se=[ge,ve,we],ye={class:"text-danger"},Ce={class:"col-md-12 mb-3",style:{background:"#fafafa",padding:"10px","border-radius":"5px","box-shadow":"2px 2px 12px 1px"}},ke={class:"col-md-12 mb-3"},De=a(()=>t("label",{for:"name",class:"form-label"},"Color",-1)),Fe=["onUpdate:modelValue"],xe=["onClick"],Me={class:"text-danger float-right"},Te=a(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),je=a(()=>t("span",{class:"bott"},"Loading",-1)),Ie={key:1,class:"bott"};function Re(e,o,Ae,Ee,s,r){const H=g("Head"),L=g("Table"),Y=g("Modal");return i(),d("div",null,[c(H,{title:"Kategori Produk"}),t("div",re,[c(O,{name:"fade"},{default:_(()=>[t("button",{class:h([s.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...l)=>r.deleteSelected&&r.deleteSelected(...l))},[le,b(" Delete Bulk ")],2)]),_:1}),t("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...l)=>r.createData&&r.createData(...l))}," + Data Baru ")]),e.$page.props.flash.success?(i(),d("div",ae,u(e.$page.props.flash.success),1)):P("",!0),e.$page.props.flash.error?(i(),d("div",ne,u(e.$page.props.flash.error),1)):P("",!0),t("div",ie,[de,c(L,{columns:s.table,rows:s.data,"onUpdate:selectedRows":r.handleSelectedRows},{actions:_(({row:l})=>[t("button",{onClick:f=>r.editRow(l),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,ce),b("  "),t("button",{onClick:f=>r.deleteRow(l),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,me)]),_:1},8,["columns","rows","onUpdate:selectedRows"]),c(Y,{show:s.modalShow,title:s.modalTitle,id:"modal-add"},{footer:_(()=>[t("button",{type:"button",class:h(["btn btn-primary",{disabled:s.form.submit}]),onClick:o[6]||(o[6]=(...l)=>r.submitForm&&r.submitForm(...l))},[s.form.submit?(i(),d(K,{key:0},[Te,je],64)):(i(),d("span",Ie,"Save"))],2)]),default:_(()=>{var l,f,w,S,y,C,k,D,F,x,M,T;return[t("form",{ref:"formCustomer",onSubmit:o[5]||(o[5]=Q((...n)=>r.submitForm&&r.submitForm(...n),["prevent"]))},[t("div",pe,[t("div",ue,[he,v(t("input",{type:"text",id:"name","onUpdate:modelValue":o[2]||(o[2]=n=>s.form.name=n),class:h(["form-control",{"is-invalid":(w=(f=(l=e.$page)==null?void 0:l.props)==null?void 0:f.errors)==null?void 0:w.name}]),placeholder:"Enter Name",required:""},null,2),[[q,s.form.name]]),t("span",be,u((C=(y=(S=e.$page)==null?void 0:S.props)==null?void 0:y.errors)==null?void 0:C.name),1)]),t("div",fe,[_e,v(t("select",{id:"type","onUpdate:modelValue":o[3]||(o[3]=n=>s.form.tipe_penjualan=n),class:h(["form-control",{"is-invalid":(F=(D=(k=e.$page)==null?void 0:k.props)==null?void 0:D.errors)==null?void 0:F.tipe_penjualan}]),required:""},Se,2),[[W,s.form.tipe_penjualan]]),t("span",ye,u((T=(M=(x=e.$page)==null?void 0:x.props)==null?void 0:M.errors)==null?void 0:T.tipe_penjualan),1)]),t("div",Ce,[(i(!0),d(K,null,X(s.form.color,(n,p)=>{var j,I,R,A,E,V,N,U;return i(),d("div",ke,[De,v(t("input",{type:"text",id:"name","onUpdate:modelValue":B=>s.form.color[p].name=B,class:h(["form-control",{"is-invalid":(A=(R=(I=(j=e.$page)==null?void 0:j.props)==null?void 0:I.errors)==null?void 0:R.color[p])==null?void 0:A.name}]),placeholder:"Enter Name",required:""},null,10,Fe),[[q,s.form.color[p].name]]),t("a",{href:"#",onClick:B=>s.form.color.splice(p,1),class:"text-danger"},"Remove",8,xe),t("span",Me,u((U=(N=(V=(E=e.$page)==null?void 0:E.props)==null?void 0:V.errors)==null?void 0:N.color[p])==null?void 0:U.name),1)])}),256)),t("button",{type:"button",class:"btn btn-primary ml-2 btn-sm",onClick:o[4]||(o[4]=n=>s.form.color.push({id:null,name:""}))},"Add Color")])])],544)]}),_:1},8,["show","title"])])])}const Pe=J(oe,[["render",Re],["__scopeId","data-v-db44ed03"]]);export{Pe as default};
