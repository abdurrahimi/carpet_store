import{A as ke}from"./AuthenticatedLayout-CYvgjY2K.js";import{M as Se}from"./Modal-iMdzk-6u.js";import{Z as Ce,c,a as f,F as u,_ as De,r as _,o as i,b as l,e as s,w as g,k as Te,t as d,d as p,n as m,i as h,v,l as $e,h as Me}from"./app-CUebUM7Q.js";import{M as Ve}from"./vue-multiselect.esm-DrWtARSN.js";/* empty css                        */const Fe={layout:ke,props:["store"],components:{Head:Ce,Modal:Se,Multiselect:Ve},data(){return{table:[{title:"Nama Store",data:"name"},{title:"Manajer / PIC",data:"manager.name"},{title:"Store Code",data:"code"},{title:"Alamat",data:"address"},{title:"Nomor Telepon",data:"phone"},{title:"Tipe Store",data:"store_type",render:e=>e.store_type==1?c("span",null,[f("Cabang")]):c("span",null,[f("Gudang")])}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},data:this.store,karyawan:[]}},mounted(){this.resetForm(),this.getDataKaryawan()},methods:{createProduct(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Product",$("#modal-product-index").modal("show")},editRow(e){var o;this.getDataKaryawan((o=e.manager)==null?void 0:o.name),this.resetForm(),this.populateForm(e),this.form.account=e.account,this.modalTitle="Ubah Data Karyawan",$("#modal-product-index").modal("show")},deleteRow(e){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(e),!1)},deleteAction(e){u.delete(this.route("store.delete",e.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),u.visit(this.$page.url,{only:["store"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?u.post(this.route("store.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),u.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}):u.put(this.route("store.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),u.visit(this.$page.url,{only:["store"]}),this.form.submit=!1,$("#modal-product-index").modal("hide")},onError:()=>{this.form.submit=!1,this.$error()}}))}catch{this.form.submit=!1}},resetForm(){this.form={id:null,name:"",address:"",phone:"",store_type:"1",code:"",manager:{},submit:!1}},populateForm(e){this.form.id=e.id,this.form.name=e.name,this.form.address=e.address,this.form.phone=e.phone,this.form.store_type=e.store_type,this.form.manager=e.manager,this.form.code=e.code||""},async getDataKaryawan(e=""){let{data:o}=await axios.get(this.route("users.get",{name:e}));this.karyawan=o}}},Ue={class:"text-right"},Ne=s("i",{class:"fa fa-trash"},null,-1),Pe={key:0,class:"alert alert-success",role:"alert"},Re={key:1,class:"alert alert-danger",role:"alert"},Ae={class:"card shadow"},Ee=s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-box"}),f(" Data Product ")])],-1),Ie=["onClick"],Be=["onClick"],Ke={class:"row"},He={class:"col-md-6 mb-3"},Ge={class:"form-group"},Le=s("label",{for:"name"},"Nama Store",-1),je={key:0,class:"invalid-feedback"},qe={class:"col-md-6 mb-3"},ze={class:"form-group"},Ye=s("label",{for:"code"},"Store Code",-1),Ze={key:0,class:"invalid-feedback"},Je={class:"col-md-6 mb-3"},Oe=s("label",{for:"toko_id",class:"form-label"},"Manager / PIC",-1),Qe={class:"text-danger"},We={class:"col-md-6 mb-3"},Xe={class:"form-group"},xe=s("label",{for:"phone"},"Nomor Telepon",-1),es={key:0,class:"invalid-feedback"},ss={class:"col-md-6 mb-3"},os={class:"form-group"},ts=s("label",{for:"store_type"},"Tipe Store",-1),rs=s("option",{value:"1"},"Cabang",-1),as=s("option",{value:"2"},"Gudang",-1),is=[rs,as],ls={key:0,class:"invalid-feedback"},ns={class:"row"},ds={class:"col-md-12 mb-3"},ms={class:"form-group"},ps=s("label",{for:"address"},"Alamat",-1),cs={key:0,class:"invalid-feedback"},us={key:0},hs=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),fs=s("span",{class:"bott"},"Loading",-1),bs=[hs,fs],_s={key:1,class:"bott"};function gs(e,o,vs,ys,t,n){const ge=_("Head"),ve=_("Table"),ye=_("Multiselect"),we=_("Modal");return i(),l("div",null,[c(ge,{title:"Data Store"}),s("div",Ue,[c(Te,{name:"fade"},{default:g(()=>[s("button",{class:m([t.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:o[0]||(o[0]=(...a)=>e.deleteSelected&&e.deleteSelected(...a))},[Ne,f(" Delete Bulk ")],2)]),_:1}),s("button",{class:"btn btn-primary mb-2",type:"button",onClick:o[1]||(o[1]=(...a)=>n.createProduct&&n.createProduct(...a))}," + Data Baru ")]),e.$page.props.flash.success?(i(),l("div",Pe,d(e.$page.props.flash.success),1)):p("",!0),e.$page.props.flash.error?(i(),l("div",Re,d(e.$page.props.flash.error),1)):p("",!0),s("div",Ae,[Ee,c(ve,{columns:t.table,rows:t.data,"onUpdate:selectedRows":n.handleSelectedRows},{actions:g(({row:a})=>[s("button",{onClick:b=>n.editRow(a),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,Ie),f("  "),s("button",{onClick:b=>n.deleteRow(a),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,Be)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),c(we,{show:t.modalShow,title:t.modalTitle,id:"modal-product-index"},{footer:g(()=>[s("button",{type:"button",class:m(["btn btn-primary",{disabled:t.form.submit}]),onClick:o[9]||(o[9]=(...a)=>n.submitForm&&n.submitForm(...a))},[t.form.submit?(i(),l("div",us,bs)):(i(),l("span",_s,"Save"))],2)]),default:g(()=>{var a,b,y,w,k,S,C,D,T,M,V,F,U,N,P,R,A,E,I,B,K,H,G,L,j,q,z,Y,Z,J,O,Q,W,X,x,ee,se,oe,te,re,ae,ie,le,ne,de,me,pe,ce,ue,he,fe,be,_e;return[s("form",{ref:"formProduct",onSubmit:o[8]||(o[8]=Me((...r)=>e.handleSubmit&&e.handleSubmit(...r),["prevent"]))},[s("div",Ke,[s("div",He,[s("div",Ge,[Le,h(s("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=r=>t.form.name=r),class:m(["form-control",{"is-invalid":(y=(b=(a=e.$page)==null?void 0:a.props)==null?void 0:b.errors)==null?void 0:y.name}]),id:"name",required:""},null,2),[[v,t.form.name]]),(S=(k=(w=e.$page)==null?void 0:w.props)==null?void 0:k.errors)!=null&&S.name?(i(),l("div",je,d((T=(D=(C=e.$page)==null?void 0:C.props)==null?void 0:D.errors)==null?void 0:T.name),1)):p("",!0)])]),s("div",qe,[s("div",ze,[Ye,h(s("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=r=>t.form.code=r),class:m(["form-control",{"is-invalid":(F=(V=(M=e.$page)==null?void 0:M.props)==null?void 0:V.errors)==null?void 0:F.code}]),id:"code"},null,2),[[v,t.form.code]]),(P=(N=(U=e.$page)==null?void 0:U.props)==null?void 0:N.errors)!=null&&P.code?(i(),l("div",Ze,d((E=(A=(R=e.$page)==null?void 0:R.props)==null?void 0:A.errors)==null?void 0:E.code),1)):p("",!0)])]),s("div",Je,[Oe,c(ye,{modelValue:t.form.manager,"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.manager=r),options:t.karyawan,"track-by":"id",label:"name",onSearchChange:n.getDataKaryawan,"internal-search":!1,class:m({"is-invalid":(H=(K=(B=(I=e.$page)==null?void 0:I.props)==null?void 0:B.errors)==null?void 0:K.manager)==null?void 0:H.id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",Qe,d((q=(j=(L=(G=e.$page)==null?void 0:G.props)==null?void 0:L.errors)==null?void 0:j.manager)==null?void 0:q.id),1)]),s("div",We,[s("div",Xe,[xe,h(s("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=r=>t.form.phone=r),class:m(["form-control",{"is-invalid":(Z=(Y=(z=e.$page)==null?void 0:z.props)==null?void 0:Y.errors)==null?void 0:Z.phone}]),id:"phone"},null,2),[[v,t.form.phone]]),(Q=(O=(J=e.$page)==null?void 0:J.props)==null?void 0:O.errors)!=null&&Q.phone?(i(),l("div",es,d((x=(X=(W=e.$page)==null?void 0:W.props)==null?void 0:X.errors)==null?void 0:x.phone),1)):p("",!0)])]),s("div",ss,[s("div",os,[ts,h(s("select",{"onUpdate:modelValue":o[6]||(o[6]=r=>t.form.store_type=r),class:m(["form-control",{"is-invalid":(oe=(se=(ee=e.$page)==null?void 0:ee.props)==null?void 0:se.errors)==null?void 0:oe.store_type}]),id:"store_type"},is,2),[[$e,t.form.store_type]]),(ae=(re=(te=e.$page)==null?void 0:te.props)==null?void 0:re.errors)!=null&&ae.store_type?(i(),l("div",ls,d((ne=(le=(ie=e.$page)==null?void 0:ie.props)==null?void 0:le.errors)==null?void 0:ne.store_type),1)):p("",!0)])])]),s("div",ns,[s("div",ds,[s("div",ms,[ps,h(s("textarea",{"onUpdate:modelValue":o[7]||(o[7]=r=>t.form.address=r),class:m(["form-control",{"is-invalid":(pe=(me=(de=e.$page)==null?void 0:de.props)==null?void 0:me.errors)==null?void 0:pe.address}]),id:"address"},null,2),[[v,t.form.address]]),(he=(ue=(ce=e.$page)==null?void 0:ce.props)==null?void 0:ue.errors)!=null&&he.address?(i(),l("div",cs,d((_e=(be=(fe=e.$page)==null?void 0:fe.props)==null?void 0:be.errors)==null?void 0:_e.address),1)):p("",!0)])])])],544)]}),_:1},8,["show","title"])])}const Ts=De(Fe,[["render",gs]]);export{Ts as default};
