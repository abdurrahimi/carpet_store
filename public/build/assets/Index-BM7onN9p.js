import{_ as W}from"./AuthenticatedLayout-BHIvsydQ.js";import{M as Y,s as Z}from"./vue-multiselect-GQy8MUnX.js";import{_ as G,Z as J,F as m,y as Q,z as f,o as d,c as n,a as p,b as e,m as g,p as X,t as u,d as A,n as h,x as k,A as y,e as _,v,B as ee,C as L,w as te,D as se,E as oe}from"./app-BJtmkgR4.js";const ae={layout:W,props:["products","categories"],components:{Head:J,Modal:Y,Multiselect:Z},data(){return{table:[{title:"Nama Produk",data:"product_name"},{title:"Nama Varian",data:"variant_name"},{title:"Panjang Varian",data:"variant_length"},{title:"Warna Varian",data:"variant_color"},{title:"Nama Toko",data:"store_name"},{title:"Dibuat Pada",data:"created_at"},{title:"Dibuat Oleh",data:"created_by"},{title:"Diperbarui Pada",data:"updated_at"},{title:"Diperbarui Oleh",data:"updated_by"}],data:this.products,modalTitle:"",modalShow:!1,selectedIds:[],form:{},store:[]}},mounted(){this.resetForm(),this.getDataStore()},methods:{createProduct(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Product",$("#modal-product-index").modal("show")},editRow(t){var s;this.resetForm(),this.populateForm(t),this.getDataStore((s=t.store)==null?void 0:s.name),this.form.account=t.account,this.modalTitle="Ubah Data Karyawan",$("#modal-product-index").modal("show")},deleteRow(t){this.$confirm("You won't be able to revert this!",()=>this.deleteAction(t),!1)},deleteAction(t){m.delete(this.route("user.destroy",t.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),m.visit(this.$page.url,{only:["users"]})},onError:()=>{this.$error()}})},handleSelectedRows(t){this.selectedIds=t},async getDataStore(t=""){let{data:s}=await Q.get(this.route("store.get",{name:t}));this.store=s},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?m.post(this.route("products.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-product-index").modal("hide"),this.$success("Data berhasil disimpan"),m.visit(this.$page.url,{only:["products"]})},onError:()=>{this.form.submit=!1,this.$error()}}):m.put(this.route("users.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.form.submit=!1,$("#modal-add").modal("hide"),this.$success("Data berhasil disimpan"),m.visit(this.$page.url,{only:["users"]})},onError:()=>{this.form.submit=!1,this.$error()}}))}catch(t){console.log(t)}finally{this.form.submit=!1}},resetForm(){this.form={id:"",product_name:"",toko_id:null,product_category:null,variants:[{name:"",length:"",color:""}],submit:!1}},populateForm(t){},addVariant(){this.form.variants.push({name:"",length:"",color:""})},removeVariant(t){this.form.variants.splice(t,1)}}},r=t=>(se("data-v-60be2cea"),t=t(),oe(),t),re={class:"text-right"},le=r(()=>e("i",{class:"fa fa-trash"},null,-1)),ie={key:0,class:"alert alert-success",role:"alert"},de={key:1,class:"alert alert-danger",role:"alert"},ne={class:"card shadow"},ce=r(()=>e("div",{class:"card-header"},[e("h4",{class:"card-title"},[e("i",{class:"fa fa-user"}),k(" Data Product ")])],-1)),me=["onClick"],ue=["onClick"],pe={class:"row"},he={class:"col-md-6 mb-3"},_e=r(()=>e("label",{for:"product_name",class:"form-label"},"Product Name",-1)),be={class:"text-danger"},fe={class:"col-md-6 mb-3"},ge=r(()=>e("label",{for:"toko_id",class:"form-label"},"Store",-1)),ve={class:"text-danger"},ye={class:"col-md-6 mb-3"},ke=r(()=>e("label",{for:"product_category",class:"form-label"},"Product Category",-1)),Se=["value"],Ve={class:"text-danger"},we={class:"col-md-12 mb-3"},De=r(()=>e("label",{class:"form-label"},"Product Variants",-1)),Ce={class:"row"},Pe={class:"col-md-5 mb-3"},Fe=r(()=>e("label",{class:"form-label"},"Variant Name",-1)),Ue=["onUpdate:modelValue"],Ee={class:"col-md-3 mb-3"},Ne=r(()=>e("label",{class:"form-label"},"Length",-1)),Te=["onUpdate:modelValue"],Me={class:"col-md-3 mb-3"},Ie=r(()=>e("label",{class:"form-label"},"Color",-1)),Re=["onUpdate:modelValue"],Be={class:"col-md-1 mb-3 align-baseline"},$e=["onClick"],xe=r(()=>e("i",{class:"fa fa-trash"},null,-1)),qe=[xe],Ae=r(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Le=r(()=>e("span",{class:"bott"},"Loading",-1)),He={key:1,class:"bott"};function ze(t,s,H,Oe,a,l){const z=f("Head"),O=f("Table"),j=f("Multiselect"),K=f("Modal");return d(),n("div",null,[p(z,{title:"Products"}),e("div",re,[p(X,{name:"fade"},{default:g(()=>[e("button",{class:h([a.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:s[0]||(s[0]=(...i)=>t.deleteSelected&&t.deleteSelected(...i))},[le,k(" Delete Bulk ")],2)]),_:1}),e("button",{class:"btn btn-primary mb-2",type:"button",onClick:s[1]||(s[1]=(...i)=>l.createProduct&&l.createProduct(...i))}," + Data Baru ")]),t.$page.props.flash.success?(d(),n("div",ie,u(t.$page.props.flash.success),1)):A("",!0),t.$page.props.flash.error?(d(),n("div",de,u(t.$page.props.flash.error),1)):A("",!0),e("div",ne,[ce,p(O,{columns:a.table,rows:a.data,"onUpdate:selectedRows":l.handleSelectedRows},{actions:g(({row:i})=>[e("button",{onClick:b=>l.editRow(i),class:"btn btn-warning btn-sm",title:"Edit"}," Edit",8,me),k("  "),e("button",{onClick:b=>l.deleteRow(i),class:"btn btn-danger btn-sm",title:"Delete"}," Delete ",8,ue)]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),p(K,{show:a.modalShow,title:a.modalTitle,id:"modal-product-index"},{footer:g(()=>[e("button",{type:"button",class:h(["btn btn-primary",{disabled:a.form.submit}]),onClick:s[7]||(s[7]=(...i)=>l.submitForm&&l.submitForm(...i))},[a.form.submit?(d(),n(y,{key:0},[Ae,Le],64)):(d(),n("span",He,"Save"))],2)]),default:g(()=>{var i,b,S,V,w,D,C,P,F,U,E,N,T,M,I,R,B,x;return[e("form",{onSubmit:s[6]||(s[6]=te((...o)=>t.handleSubmit&&t.handleSubmit(...o),["prevent"]))},[e("div",pe,[e("div",he,[_e,_(e("input",{type:"text",id:"product_name","onUpdate:modelValue":s[2]||(s[2]=o=>a.form.product_name=o),class:h(["form-control",{"is-invalid":(S=(b=(i=t.$page)==null?void 0:i.props)==null?void 0:b.errors)==null?void 0:S.product_name}]),placeholder:"Enter Product Name",required:""},null,2),[[v,a.form.product_name]]),e("span",be,u((D=(w=(V=t.$page)==null?void 0:V.props)==null?void 0:w.errors)==null?void 0:D.product_name),1)]),e("div",fe,[ge,p(j,{modelValue:a.form.toko_id,"onUpdate:modelValue":s[3]||(s[3]=o=>a.form.toko_id=o),options:a.store,"track-by":"id",label:"name",onSearchChange:l.getDataStore,"internal-search":!1,class:h({"is-invalid":(F=(P=(C=t.$page)==null?void 0:C.props)==null?void 0:P.errors)==null?void 0:F.toko_id})},null,8,["modelValue","options","onSearchChange","class"]),e("span",ve,u((N=(E=(U=t.$page)==null?void 0:U.props)==null?void 0:E.errors)==null?void 0:N.toko_id),1)]),e("div",ye,[ke,_(e("select",{id:"product_category","onUpdate:modelValue":s[4]||(s[4]=o=>a.form.product_category=o),class:h(["form-control",{"is-invalid":(I=(M=(T=t.$page)==null?void 0:T.props)==null?void 0:M.errors)==null?void 0:I.product_category}])},[(d(!0),n(y,null,L(H.categories,o=>(d(),n("option",{key:o.id,value:o.id},u(o.name),9,Se))),128))],2),[[ee,a.form.product_category]]),e("span",Ve,u((x=(B=(R=t.$page)==null?void 0:R.props)==null?void 0:B.errors)==null?void 0:x.product_category),1)]),e("div",we,[De,(d(!0),n(y,null,L(a.form.variants,(o,q)=>(d(),n("div",{key:q,class:"variant-group"},[e("div",Ce,[e("div",Pe,[Fe,_(e("input",{type:"text","onUpdate:modelValue":c=>o.name=c,class:"form-control",placeholder:"Enter Variant Name",required:""},null,8,Ue),[[v,o.name]])]),e("div",Ee,[Ne,_(e("input",{type:"number","onUpdate:modelValue":c=>o.length=c,class:"form-control",placeholder:"Enter Length",required:""},null,8,Te),[[v,o.length]])]),e("div",Me,[Ie,_(e("input",{type:"text","onUpdate:modelValue":c=>o.color=c,class:"form-control",placeholder:"Enter Color",required:""},null,8,Re),[[v,o.color]])]),e("div",Be,[e("button",{type:"button",class:"btn btn-danger mt-4 btn-sm",onClick:c=>l.removeVariant(q)},qe,8,$e)])])]))),128)),e("button",{type:"button",class:"btn btn-primary",onClick:s[5]||(s[5]=(...o)=>l.addVariant&&l.addVariant(...o))}," Add Variant ")])])],32)]}),_:1},8,["show","title"])])}const Ye=G(ae,[["render",ze],["__scopeId","data-v-60be2cea"]]);export{Ye as default};
