import{A as nt}from"./AuthenticatedLayout-C9WPTzTD.js";import{M as rt,a as lt}from"./vue-multiselect-DkHuuiz4.js";import{Z as dt,_ as it,y as g,o as i,c,a as f,t as d,d as h,b as t,F as k,z as $,e as u,v as _,n as tt,x as ot,A as ct,B as pt,l as ut}from"./app-BBnZtgaR.js";const _t={layout:nt,props:["data"],components:{Head:dt,Modal:rt,Multiselect:lt},data(){return{table:[{title:"Tanggal",data:"created_at"},{title:"Toko",data:"store.name"},{title:"Jumlah",data:"total"}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},products:[],variant:null,store:[],supplier:[{id:2,name:"xx"}]}},mounted(){this.resetForm(),this.getProducts()},methods:{totalUnitPrice(o){return this.form.data[o].unit_price*this.form.data[o].qty-this.form.data[o].discount_price},async getProducts(o=""){try{const{data:r}=await axios.get(this.route("products.get",{name:o}));this.products=r}catch(r){console.error("Error loading products",r)}},resetForm(){this.form={data:[{product:null,unit_top_price:0,qty:0,discount_price:0,discount_percentage:0}],customer:null,discount:0,discount_percentage:0,additional:[{name:"",total:0}],total:0}},tambahProduct(){this.form.data.push({product:null,qty:0,unit_top_price:0,discount_price:0,discount_percentage:0,variant:null})},tambahFee(){this.form.additional.push({name:"",total:0})},removeAdditional(o){o!=0&&this.form.additional.splice(o,1)},removeProduct(o){o!=0&&this.form.data.splice(o,1)},addCustomer(){console.log("okok")},pilihData(o){const r=this.form.data[o].product;this.form.data[o].unit_price=r.unit_top_price??0},calcDisPrice(o){this.form.data[o].discount_price=this.form.data[o].discount_percentage*this.form.data[o].unit_price},calcDisPerc(o){this.form.data[o].discount_percentage=this.form.data[o].discount_price/this.form.data[o].unit_price*100}}},a=o=>(ct("data-v-510f1acf"),o=o(),pt(),o),mt={key:0,class:"alert alert-success",role:"alert"},ht={key:1,class:"alert alert-danger",role:"alert"},ft={class:"card shadow mb-5"},gt={class:"card-body"},bt={id:"form-kasir"},vt={class:"table"},Vt=a(()=>t("thead",null,null,-1)),Pt={class:"nt"},Ut={class:"form-group"},xt=a(()=>t("label",{for:"product_id",class:"form-label"},"Produk",-1)),yt={class:"text-danger"},Ct={class:"nt"},St={class:"form-group"},Dt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Jumlah (Meter)",-1)),wt={class:"input-group"},Tt=["onUpdate:modelValue"],Ft=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"Meter")],-1)),Mt={class:"text-danger"},jt={class:"nt"},At={class:"form-group"},Kt=a(()=>t("label",{for:"product_id",class:"form-label"},"Variants",-1)),Rt={class:"text-danger"},It={class:"nt"},qt={class:"form-group"},Ht=a(()=>t("label",{for:"jumlah",class:"form-label"},"Unit Price",-1)),Bt={class:"input-group"},Nt=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),zt=["onUpdate:modelValue"],Et={class:"text-danger"},Jt={class:"nt"},Lt={class:"form-group"},Ot=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (Rp)",-1)),Zt={class:"input-group"},Gt=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Qt=["onKeyup","onUpdate:modelValue"],Wt={class:"text-danger"},Xt={class:"nt"},Yt={class:"form-group"},kt=a(()=>t("label",{for:"jumlah",class:"form-label"},"Discount (%)",-1)),$t={class:"input-group"},to=["onKeyup","onUpdate:modelValue"],oo=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),so={class:"text-danger"},eo={class:"nt"},ao={class:"form-group"},no=a(()=>t("label",{for:"jumlah",class:"form-label"},"Total Price",-1)),ro={class:"input-group"},lo=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),io=["value"],co={class:"text-danger"},po={class:"nt align-middle"},uo=["onClick"],_o=["rowspan"],mo=a(()=>t("label",null,"Additional Fee",-1)),ho=[mo],fo={colspan:"2"},go={class:"form-group"},bo={for:"additional_fee",class:"form-label"},vo=["onUpdate:modelValue"],Vo={class:"form-group"},Po=a(()=>t("label",{for:"additional_fee",class:"form-label"},"Harga",-1)),Uo={class:"input-group"},xo=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),yo=["onUpdate:modelValue"],Co={class:"nt align-middle"},So=["onClick"],Do=a(()=>t("td",{colspan:"5"},"Discount",-1)),wo={class:"form-group"},To={class:"input-group"},Fo=a(()=>t("div",{class:"input-group-append"},[t("span",{class:"input-group-text"},"%")],-1)),Mo={class:"form-group"},jo={class:"input-group"},Ao=a(()=>t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")],-1)),Ko=a(()=>t("td",null,null,-1)),Ro=a(()=>t("tr",null,[t("td",{colspan:"6"},"Total Transaksi"),t("td",null,[t("div",{class:"form-group"},[t("div",{class:"input-group"},[t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},"Rp")]),t("input",{class:"form-control",type:"number",disabled:""})])])]),t("td")],-1)),Io=a(()=>t("tr",null,[t("td",{colspan:"6"},"Kasir"),t("td",null,[t("div",{class:"form-group"},[t("a",{class:"btn btn-primary float-right"},"Submit")])]),t("td")],-1)),qo={class:"card shadow"},Ho=a(()=>t("div",{class:"card-header"},[t("h4",{class:"card-title"},[t("i",{class:"fa fa-box"}),ot("Â Data Penjualan Hari Ini ")])],-1));function Bo(o,r,st,No,e,l){const et=g("Head"),b=g("Multiselect"),at=g("Table");return i(),c("div",null,[f(et,{title:"Kasir"}),o.$page.props.flash.success?(i(),c("div",mt,d(o.$page.props.flash.success),1)):h("",!0),o.$page.props.flash.error?(i(),c("div",ht,d(o.$page.props.flash.error),1)):h("",!0),t("div",ft,[t("div",gt,[t("form",bt,[t("button",{class:"btn btn-primary btn-sm mb-2 float-right",type:"button",onClick:r[0]||(r[0]=(...m)=>l.tambahProduct&&l.tambahProduct(...m))}," + Tambah Product "),t("table",vt,[Vt,t("tbody",null,[(i(!0),c(k,null,$(e.form.data,(m,s)=>{var p,v,V,P,U,x,y,C,S,D,w,T,F,M,j,A,K,R,I,q,H,B,N,z,E,J,L,O,Z,G,Q,W,X,Y;return i(),c("tr",null,[t("td",Pt,[t("div",Ut,[xt,f(b,{modelValue:e.form.data[s].product,"onUpdate:modelValue":n=>e.form.data[s].product=n,options:e.products,"track-by":"id",placeholder:"Pilih Produk",label:"name",onSearchChange:l.getProducts,onSelect:n=>l.pilihData(s),"internal-search":!1,class:tt({"is-invalid":(P=(V=(v=(p=o.$page)==null?void 0:p.props)==null?void 0:v.errors)==null?void 0:V.product)==null?void 0:P.id})},null,8,["modelValue","onUpdate:modelValue","options","onSearchChange","onSelect","class"]),t("span",yt,d((C=(y=(x=(U=o.$page)==null?void 0:U.props)==null?void 0:x.errors)==null?void 0:y.product)==null?void 0:C.id),1)])]),t("td",Ct,[t("div",St,[Dt,t("div",wt,[u(t("input",{type:"number",class:"form-control",min:"0","onUpdate:modelValue":n=>e.form.data[s].qty=n},null,8,Tt),[[_,e.form.data[s].qty]]),Ft]),t("span",Mt,d((T=(w=(D=(S=o.$page)==null?void 0:S.props)==null?void 0:D.errors)==null?void 0:w.product)==null?void 0:T.id),1)])]),t("td",jt,[t("div",At,[Kt,f(b,{modelValue:e.form.data[s].product,"onUpdate:modelValue":n=>e.form.data[s].product=n,options:e.products,"track-by":"id",placeholder:"Pilih Produk",label:"name",onSearchChange:l.getProducts,"internal-search":!1,class:tt({"is-invalid":(A=(j=(M=(F=o.$page)==null?void 0:F.props)==null?void 0:M.errors)==null?void 0:j.product)==null?void 0:A.id})},null,8,["modelValue","onUpdate:modelValue","options","onSearchChange","class"]),t("span",Rt,d((q=(I=(R=(K=o.$page)==null?void 0:K.props)==null?void 0:R.errors)==null?void 0:I.product)==null?void 0:q.id),1)])]),t("td",It,[t("div",qt,[Ht,t("div",Bt,[Nt,u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":n=>e.form.data[s].unit_price=n,disabled:""},null,8,zt),[[_,e.form.data[s].unit_price]])]),t("span",Et,d((z=(N=(B=(H=o.$page)==null?void 0:H.props)==null?void 0:B.errors)==null?void 0:N.product)==null?void 0:z.id),1)])]),t("td",Jt,[t("div",Lt,[Ot,t("div",Zt,[Gt,u(t("input",{type:"number",class:"form-control",onKeyup:n=>l.calcDisPerc(s),"onUpdate:modelValue":n=>e.form.data[s].discount_price=n},null,40,Qt),[[_,e.form.data[s].discount_price]])]),t("span",Wt,d((L=(J=(E=o.$page)==null?void 0:E.props)==null?void 0:J.errors)==null?void 0:L.discount_price),1)])]),t("td",Xt,[t("div",Yt,[kt,t("div",$t,[u(t("input",{type:"number",class:"form-control",onKeyup:n=>l.calcDisPrice(s),"onUpdate:modelValue":n=>e.form.data[s].discount_percentage=n},null,40,to),[[_,e.form.data[s].discount_percentage]]),oo]),t("span",so,d((G=(Z=(O=o.$page)==null?void 0:O.props)==null?void 0:Z.errors)==null?void 0:G.discount_percentage),1)])]),t("td",eo,[t("div",ao,[no,t("div",ro,[lo,ot(" "+d()+" ",1),t("input",{type:"number",class:"form-control",value:l.totalUnitPrice(s),disabled:""},null,8,io)]),t("span",co,d((Y=(X=(W=(Q=o.$page)==null?void 0:Q.props)==null?void 0:W.errors)==null?void 0:X.product)==null?void 0:Y.id),1)])]),t("td",po,[u(t("a",{class:"btn btn-danger btn-sm",onClick:n=>l.removeProduct(s)},"x",8,uo),[[ut,s!=0]])])])}),256)),(i(!0),c(k,null,$(e.form.additional,(m,s)=>(i(),c("tr",{key:s},[s==0?(i(),c("td",{key:0,colspan:"4",rowspan:Object.keys(e.form.additional).length,class:"align-middle"},ho,8,_o)):h("",!0),t("td",fo,[t("div",go,[t("label",bo," Additional Service "+d(s+1),1),u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":p=>e.form.additional[s].name=p},null,8,vo),[[_,e.form.additional[s].name]])])]),t("td",null,[t("div",Vo,[Po,t("div",Uo,[xo,u(t("input",{class:"form-control",type:"text","onUpdate:modelValue":p=>e.form.additional[s].total=p},null,8,yo),[[_,e.form.additional[s].total]])])])]),t("td",Co,[s!=0?(i(),c("button",{key:0,class:"btn btn-danger btn-sm",onClick:p=>l.removeAdditional(s)}," x ",8,So)):h("",!0),s==0?(i(),c("button",{key:1,class:"btn btn-primary btn-sm",type:"button",onClick:r[1]||(r[1]=(...p)=>l.tambahFee&&l.tambahFee(...p))}," + ")):h("",!0)])]))),128)),t("tr",null,[Do,t("td",null,[t("div",wo,[t("div",To,[u(t("input",{"onUpdate:modelValue":r[2]||(r[2]=m=>e.form.discount_percentage=m),class:"form-control",type:"number"},null,512),[[_,e.form.discount_percentage]]),Fo])])]),t("td",null,[t("div",Mo,[t("div",jo,[Ao,u(t("input",{"onUpdate:modelValue":r[3]||(r[3]=m=>e.form.discount=m),class:"form-control",type:"number"},null,512),[[_,e.form.discount]])])])]),Ko]),Ro,Io])])])])]),t("div",qo,[Ho,f(at,{columns:e.table,rows:st.data},null,8,["columns","rows"])])])}const Lo=it(_t,[["render",Bo],["__scopeId","data-v-510f1acf"]]);export{Lo as default};
