import{A as Ee}from"./AuthenticatedLayout-BqfBkZXW.js";import{M as Re}from"./Modal-KFsSFIqO.js";import{Z as Fe,c as a,a as l,F as h,_ as Pe,r as f,o as n,b as d,e as s,w as b,k as je,t as c,d as m,n as u,i as g,v as Ce,l as De,h as Ae}from"./app-DOBYqpWM.js";import{M as Be}from"./vue-multiselect.esm-BzEJETvq.js";/* empty css                        */const Ie={layout:Ee,props:["stock"],components:{Head:Fe,Modal:Re,Multiselect:Be},data(){return{table:[{title:"Nama Produk",data:"product.design_name"},{title:"Jumlah",data:"total"},{title:"Tipe",data:"stock_type",render:e=>e.stock_type==1?a("span",{class:"badge badge-success"},[l("Baru")]):a("span",{class:"badge badge-warning"},[l("Bekas")])},{title:"Tipe Stok",data:"type",render:e=>e.type=="IN"?a("span",{class:"text-success"},[l("Stock In")]):a("span",{class:"text-danger"},[l("Stock In")])},{title:"Toko",data:"store.name"},{title:"Supplier",data:"supplier.name"},{title:"Status",data:"approval.status",render:e=>{switch(e.approval.status){case 0:return a("span",{class:"badge badge-warning"},[l("Waiting for Approval")]);case 1:return a("span",{class:"badge badge-success"},[l("Approved")]);case 2:return a("span",{class:"badge badge-danger"},[l("Rejected")]);default:return a("span",null,[l("Unknown")])}}}],modalTitle:"",modalShow:!1,selectedIds:[],form:{},data:this.stock,products:[],store:[],supplier:[{id:2,name:"xx"}]}},mounted(){this.resetForm(),this.getProducts(),this.getDataStore(),this.getDataSupplier()},methods:{createStock(){this.$page.props.errors=null,this.resetForm(),this.modalTitle="Tambah Data Stok",$("#modal-stock-index").modal("show")},deleteRow(e){this.$confirm("Data yang sudah dihapus tidak dapat dikembalikan!",()=>this.deleteAction(e),!1)},deleteAction(e){h.delete(this.route("stock.delete",e.id),{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil dihapus"),h.visit(this.$page.url,{only:["stock"]})},onError:()=>{this.$error()}})},handleSelectedRows(e){this.selectedIds=e},async submitForm(){try{return this.form.submit?void 0:(this.form.submit=!0,this.form.id==""||this.form.id==null?h.post(this.route("stock.store"),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),this.form.submit=!1,$("#modal-stock-index").modal("hide"),h.visit(this.$page.url,{only:["stock"]})},onError:()=>{this.form.submit=!1,this.$error()}}):h.put(this.route("stock.update",this.form.id),this.form,{preserveScroll:!0,onSuccess:()=>{this.$success("Data berhasil disimpan"),this.form.submit=!1,$("#modal-stock-index").modal("hide"),h.visit(this.$page.url,{only:["stock"]})},onError:()=>{this.form.submit=!1,this.$error()}}))}catch{this.form.submit=!1,this.$error("Terjadi kesalahan saat menyimpan data")}},resetForm(){this.form={id:null,product:null,stock_type:1,value:"",product_type:1,stock_ref:"",submit:!1}},populateForm(e){this.form.id=e.id,this.form.product=e.product,this.form.product_type=e.stock_type,this.form.total=e.total,this.form.store=e.store,this.form.supplier=e.supplier,this.form.store=e.store},async getProducts(e=""){try{const{data:t}=await axios.get(this.route("products.get",{search:e}));this.products=t}catch(t){console.error("Error loading products",t)}},async getDataStore(e=""){let{data:t}=await axios.get(this.route("store.get",{name:e}));this.store=t},async getDataSupplier(e=""){}}},$e={class:"text-right"},Ne=s("i",{class:"fa fa-trash"},null,-1),Ke={key:0,class:"alert alert-success",role:"alert"},He={key:1,class:"alert alert-danger",role:"alert"},Je={class:"card shadow"},Oe=s("div",{class:"card-header"},[s("h4",{class:"card-title"},[s("i",{class:"fa fa-box"}),l(" Data Stok ")])],-1),Le=["onClick"],qe={class:"row"},ze={class:"col-md-12 mb-3"},We=s("label",{for:"product_id",class:"form-label"},"Pilih Produk",-1),Ze={class:"text-danger"},Ge={class:"col-md-12 mb-3"},Qe=s("label",{for:"toko_id",class:"form-label"},"Store",-1),Xe={class:"text-danger"},Ye={class:"col-md-6 mb-3"},xe=s("label",{for:"toko_id",class:"form-label"},"Supplier",-1),es={class:"text-danger"},ss={class:"col-md-6 mb-3"},ts={class:"form-group"},os=s("label",{for:"total"},"Jumlah",-1),rs={key:0,class:"invalid-feedback"},as={class:"col-md-6 mb-3"},ls={class:"form-group"},is=s("label",{for:"type"},"Tipe",-1),ns=s("option",{value:"IN"},"STOCK MASUK",-1),ds=s("option",{value:"OUT"},"STOCK KELUAR",-1),ps=s("option",{value:"REJECT"},"STOCK REJECT",-1),cs=[ns,ds,ps],us={key:0,class:"invalid-feedback"},ms={class:"col-md-6 mb-3"},hs={class:"form-group"},fs=s("label",{for:"product_type"},"Tipe Produk",-1),bs=s("option",{value:"1"},"Baru",-1),gs=s("option",{value:"2"},"Bekas",-1),_s=[bs,gs],ks={key:0,class:"invalid-feedback"},vs={key:0,class:"col-md-6 mb-3"},ys={class:"form-group"},Ss=s("label",{for:"value"},"Sisa Panjang(Meter)",-1),ws={key:0,class:"invalid-feedback"},Ts={key:0},Cs=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Ds=s("span",{class:"bott"},"Loading",-1),Vs=[Cs,Ds],Ms={key:1,class:"bott"};function Us(e,t,Es,Rs,o,p){const Ve=f("Head"),Me=f("Table"),_=f("Multiselect"),Ue=f("Modal");return n(),d("div",null,[a(Ve,{title:"Data Stok"}),s("div",$e,[a(je,{name:"fade"},{default:b(()=>[s("button",{class:u([o.selectedIds.length>0?"show":"","btn btn-danger mr-2 mb-2 fade"]),onClick:t[0]||(t[0]=(...i)=>e.deleteSelected&&e.deleteSelected(...i))},[Ne,l(" Hapus Pilihan ")],2)]),_:1}),s("button",{class:"btn btn-primary mb-2",type:"button",onClick:t[1]||(t[1]=(...i)=>p.createStock&&p.createStock(...i))}," + Stok Baru ")]),e.$page.props.flash.success?(n(),d("div",Ke,c(e.$page.props.flash.success),1)):m("",!0),e.$page.props.flash.error?(n(),d("div",He,c(e.$page.props.flash.error),1)):m("",!0),s("div",Je,[Oe,a(Me,{columns:o.table,rows:o.data,"onUpdate:selectedRows":p.handleSelectedRows},{actions:b(({row:i})=>[s("button",{onClick:k=>p.deleteRow(i),class:"btn btn-danger btn-sm",title:"Delete"}," Delete",8,Le),l("  ")]),_:1},8,["columns","rows","onUpdate:selectedRows"])]),a(Ue,{show:o.modalShow,title:o.modalTitle,id:"modal-stock-index"},{footer:b(()=>[s("button",{type:"button",class:u(["btn btn-primary",{disabled:o.form.submit}]),onClick:t[10]||(t[10]=(...i)=>p.submitForm&&p.submitForm(...i))},[o.form.submit?(n(),d("div",Ts,Vs)):(n(),d("span",Ms,"Simpan"))],2)]),default:b(()=>{var i,k,v,y,S,w,T,C,D,V,M,U,E,R,F,P,j,A,B,I,N,K,H,J,O,L,q,z,W,Z,G,Q,X,Y,x,ee,se,te,oe,re,ae,le,ie,ne,de,pe,ce,ue,me,he,fe,be,ge,_e,ke,ve,ye,Se,we,Te;return[s("form",{ref:"formStock",onSubmit:t[9]||(t[9]=Ae((...r)=>e.handleSubmit&&e.handleSubmit(...r),["prevent"]))},[s("div",qe,[s("div",ze,[We,a(_,{modelValue:o.form.product,"onUpdate:modelValue":t[2]||(t[2]=r=>o.form.product=r),options:o.products,"track-by":"id",label:"design_name",onSearchChange:p.getProducts,"internal-search":!1,class:u({"is-invalid":(y=(v=(k=(i=e.$page)==null?void 0:i.props)==null?void 0:k.errors)==null?void 0:v.product)==null?void 0:y.id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",Ze,c((C=(T=(w=(S=e.$page)==null?void 0:S.props)==null?void 0:w.errors)==null?void 0:T.product)==null?void 0:C.id),1)]),s("div",Ge,[Qe,a(_,{modelValue:o.form.store,"onUpdate:modelValue":t[3]||(t[3]=r=>o.form.store=r),options:o.store,"track-by":"id",label:"name",onSearchChange:p.getDataStore,"internal-search":!1,class:u({"is-invalid":(U=(M=(V=(D=e.$page)==null?void 0:D.props)==null?void 0:V.errors)==null?void 0:M.store)==null?void 0:U.id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",Xe,c((P=(F=(R=(E=e.$page)==null?void 0:E.props)==null?void 0:R.errors)==null?void 0:F.store)==null?void 0:P.id),1)]),s("div",Ye,[xe,a(_,{modelValue:o.form.supplier,"onUpdate:modelValue":t[4]||(t[4]=r=>o.form.supplier=r),options:o.supplier,"track-by":"id",label:"name",onSearchChange:p.getDataSupplier,"internal-search":!1,class:u({"is-invalid":(I=(B=(A=(j=e.$page)==null?void 0:j.props)==null?void 0:A.errors)==null?void 0:B.supplier)==null?void 0:I.id})},null,8,["modelValue","options","onSearchChange","class"]),s("span",es,c((J=(H=(K=(N=e.$page)==null?void 0:N.props)==null?void 0:K.errors)==null?void 0:H.supplier)==null?void 0:J.id),1)]),s("div",ss,[s("div",ts,[os,g(s("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=r=>o.form.total=r),class:u(["form-control",{"is-invalid":(q=(L=(O=e.$page)==null?void 0:O.props)==null?void 0:L.errors)==null?void 0:q.total}]),id:"total",required:""},null,2),[[Ce,o.form.total]]),(Z=(W=(z=e.$page)==null?void 0:z.props)==null?void 0:W.errors)!=null&&Z.total?(n(),d("div",rs,c((X=(Q=(G=e.$page)==null?void 0:G.props)==null?void 0:Q.errors)==null?void 0:X.total),1)):m("",!0)])]),s("div",as,[s("div",ls,[is,g(s("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.type=r),class:u(["form-control",{"is-invalid":(ee=(x=(Y=e.$page)==null?void 0:Y.props)==null?void 0:x.errors)==null?void 0:ee.type}]),id:"type"},cs,2),[[De,o.form.type]]),(oe=(te=(se=e.$page)==null?void 0:se.props)==null?void 0:te.errors)!=null&&oe.type?(n(),d("div",us,c((le=(ae=(re=e.$page)==null?void 0:re.props)==null?void 0:ae.errors)==null?void 0:le.type),1)):m("",!0)])]),s("div",ms,[s("div",hs,[fs,g(s("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.form.product_type=r),class:u(["form-control",{"is-invalid":(de=(ne=(ie=e.$page)==null?void 0:ie.props)==null?void 0:ne.errors)==null?void 0:de.product_type}]),id:"product_type"},_s,2),[[De,o.form.product_type]]),(ue=(ce=(pe=e.$page)==null?void 0:pe.props)==null?void 0:ce.errors)!=null&&ue.product_type?(n(),d("div",ks,c((fe=(he=(me=e.$page)==null?void 0:me.props)==null?void 0:he.errors)==null?void 0:fe.product_type),1)):m("",!0)])]),o.form.product_type==2?(n(),d("div",vs,[s("div",ys,[Ss,g(s("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=r=>o.form.panjang=r),class:u(["form-control",{"is-invalid":(_e=(ge=(be=e.$page)==null?void 0:be.props)==null?void 0:ge.errors)==null?void 0:_e.panjang}]),id:"value",required:""},null,2),[[Ce,o.form.panjang]]),(ye=(ve=(ke=e.$page)==null?void 0:ke.props)==null?void 0:ve.errors)!=null&&ye.panjang?(n(),d("div",ws,c((Te=(we=(Se=e.$page)==null?void 0:Se.props)==null?void 0:we.errors)==null?void 0:Te.panjang),1)):m("",!0)])])):m("",!0)])],544)]}),_:1},8,["show","title"])])}const Is=Pe(Ie,[["render",Us]]);export{Is as default};
